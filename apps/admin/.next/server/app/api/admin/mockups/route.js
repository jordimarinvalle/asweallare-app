"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/mockups/route";
exports.ids = ["app/api/admin/mockups/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_apps_admin_app_api_admin_mockups_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/mockups/route.js */ \"(rsc)/./app/api/admin/mockups/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/mockups/route\",\n        pathname: \"/api/admin/mockups\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/mockups/route\"\n    },\n    resolvedPagePath: \"/app/apps/admin/app/api/admin/mockups/route.js\",\n    nextConfigOutput,\n    userland: _app_apps_admin_app_api_admin_mockups_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/mockups/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRm1vY2t1cHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGbW9ja3VwcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFkbWluJTJGbW9ja3VwcyUyRnJvdXRlLmpzJmFwcERpcj0lMkZhcHAlMkZhcHBzJTJGYWRtaW4lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCUyRmFwcHMlMkZhZG1pbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0Y7QUFDM0U7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3dlYWxsYXJlLWFkbWluLz9lYzIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9hcHAvYXBwcy9hZG1pbi9hcHAvYXBpL2FkbWluL21vY2t1cHMvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9tb2NrdXBzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vbW9ja3Vwc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vbW9ja3Vwcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9hcHAvYXBwcy9hZG1pbi9hcHAvYXBpL2FkbWluL21vY2t1cHMvcm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL21vY2t1cHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/admin/mockups/route.js":
/*!****************************************!*\
  !*** ./app/api/admin/mockups/route.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/supabase-server */ \"(rsc)/./lib/supabase-server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var adm_zip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! adm-zip */ \"(rsc)/./node_modules/adm-zip/adm-zip.js\");\n/* harmony import */ var adm_zip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(adm_zip__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n// Helper to get authenticated user (supports both local and Supabase)\nasync function getAuthenticatedUser() {\n    if (process.env.LOCAL_MODE === \"true\") {\n        const { cookies } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\"));\n        const { getUserFromToken } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/semver\"), __webpack_require__.e(\"vendor-chunks/jsonwebtoken\"), __webpack_require__.e(\"vendor-chunks/jws\"), __webpack_require__.e(\"vendor-chunks/ecdsa-sig-formatter\"), __webpack_require__.e(\"vendor-chunks/bcryptjs\"), __webpack_require__.e(\"vendor-chunks/safe-buffer\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/lodash.once\"), __webpack_require__.e(\"vendor-chunks/lodash.isstring\"), __webpack_require__.e(\"vendor-chunks/lodash.isplainobject\"), __webpack_require__.e(\"vendor-chunks/lodash.isnumber\"), __webpack_require__.e(\"vendor-chunks/lodash.isinteger\"), __webpack_require__.e(\"vendor-chunks/lodash.isboolean\"), __webpack_require__.e(\"vendor-chunks/lodash.includes\"), __webpack_require__.e(\"vendor-chunks/jwa\"), __webpack_require__.e(\"vendor-chunks/buffer-equal-constant-time\"), __webpack_require__.e(\"_rsc_lib_auth-local_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../lib/auth-local */ \"(rsc)/./lib/auth-local.js\"));\n        const cookieStore = cookies();\n        const token = cookieStore.get(\"auth-token\")?.value;\n        if (token) {\n            const user = await getUserFromToken(token);\n            if (user) {\n                return {\n                    user,\n                    error: null\n                };\n            }\n        }\n        return {\n            user: null,\n            error: \"Not authenticated\"\n        };\n    }\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    const { data: { user }, error } = await supabase.auth.getUser();\n    return {\n        user,\n        error\n    };\n}\n// Admin email (for Supabase mode)\nconst ADMIN_EMAIL = \"mocasin@gmail.com\";\nfunction isAuthorized(user) {\n    const isLocalMode = process.env.LOCAL_MODE === \"true\";\n    return isLocalMode ? user !== null : user && (user.email === ADMIN_EMAIL || user.is_admin);\n}\n// GET - Fetch mockup images for a box\nasync function GET(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    try {\n        const { user, error: authError } = await getAuthenticatedUser();\n        if (authError || !isAuthorized(user)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const boxId = searchParams.get(\"boxId\");\n        if (!boxId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"boxId required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get all mockup images for this box, ordered by display_order then created_at\n        const { data: mockups, error } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId).order(\"display_order\", {\n            ascending: true\n        }).order(\"created_at\", {\n            ascending: true\n        });\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Separate by type\n        const mainImage = mockups?.find((m)=>m.image_type === \"BOX_MAIN\") || null;\n        const secondaryImage = mockups?.find((m)=>m.image_type === \"BOX_SECONDARY\") || null;\n        const cardMockups = (mockups || []).filter((m)=>m.image_type === \"CARD\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            boxId,\n            mainImage,\n            secondaryImage,\n            cardMockups,\n            totalCount: mockups?.length || 0\n        });\n    } catch (error) {\n        console.error(\"[MOCKUPS GET] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// POST - Upload mockup image(s)\nasync function POST(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    try {\n        const { user, error: authError } = await getAuthenticatedUser();\n        if (authError || !isAuthorized(user)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const boxId = formData.get(\"boxId\");\n        const imageType = formData.get(\"imageType\") // 'BOX_MAIN', 'BOX_SECONDARY', or 'CARD_ZIP'\n        ;\n        if (!file || !boxId || !imageType) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields: file, boxId, imageType\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate imageType\n        const validTypes = [\n            \"BOX_MAIN\",\n            \"BOX_SECONDARY\",\n            \"CARD_ZIP\"\n        ];\n        if (!validTypes.includes(imageType)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Invalid imageType. Must be one of: ${validTypes.join(\", \")}`\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"[MOCKUPS POST] Processing:\", {\n            boxId,\n            imageType,\n            fileName: file.name\n        });\n        // Handle ZIP upload for card mockups\n        if (imageType === \"CARD_ZIP\") {\n            return handleCardMockupsZip(supabase, file, boxId);\n        }\n        // Handle single image upload (BOX_MAIN or BOX_SECONDARY)\n        return handleSingleImageUpload(supabase, file, boxId, imageType);\n    } catch (error) {\n        console.error(\"[MOCKUPS POST] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE - Delete mockup image(s)\nasync function DELETE(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    try {\n        const { user, error: authError } = await getAuthenticatedUser();\n        if (authError || !isAuthorized(user)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const boxId = searchParams.get(\"boxId\");\n        const imageId = searchParams.get(\"imageId\");\n        const deleteType = searchParams.get(\"type\") // 'all', 'main', 'secondary', 'cards', or specific id\n        ;\n        if (!boxId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"boxId required\"\n            }, {\n                status: 400\n            });\n        }\n        let deletedCount = 0;\n        if (imageId) {\n            // Delete specific image by ID\n            const { data: image } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"id\", imageId).eq(\"box_id\", boxId).single();\n            if (image) {\n                await deleteImageFile(image.image_path);\n                await supabase.from(\"mockup_images\").delete().eq(\"id\", imageId);\n                deletedCount = 1;\n            }\n        } else if (deleteType === \"all\") {\n            // Delete all mockups for box\n            deletedCount = await deleteAllMockupsForBox(supabase, boxId);\n        } else if (deleteType === \"main\") {\n            deletedCount = await deleteMockupsByType(supabase, boxId, \"BOX_MAIN\");\n        } else if (deleteType === \"secondary\") {\n            deletedCount = await deleteMockupsByType(supabase, boxId, \"BOX_SECONDARY\");\n        } else if (deleteType === \"cards\") {\n            deletedCount = await deleteMockupsByType(supabase, boxId, \"CARD\");\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Specify imageId or type (all, main, secondary, cards)\"\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            deleted: deletedCount\n        });\n    } catch (error) {\n        console.error(\"[MOCKUPS DELETE] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT - Update mockup image (display_order)\nasync function PUT(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    try {\n        const { user, error: authError } = await getAuthenticatedUser();\n        if (authError || !isAuthorized(user)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { id, displayOrder } = body;\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"id required\"\n            }, {\n                status: 400\n            });\n        }\n        if (displayOrder === undefined || displayOrder === null) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"displayOrder required\"\n            }, {\n                status: 400\n            });\n        }\n        // Update the display_order\n        const { error } = await supabase.from(\"mockup_images\").update({\n            display_order: parseInt(displayOrder)\n        }).eq(\"id\", id);\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"[MOCKUPS PUT] Updated display_order for\", id, \"to\", displayOrder);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"[MOCKUPS PUT] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper: Handle single image upload (BOX_MAIN or BOX_SECONDARY)\nasync function handleSingleImageUpload(supabase, file, boxId, imageType) {\n    // Validate file type\n    const validExtensions = [\n        \".png\",\n        \".jpg\",\n        \".jpeg\",\n        \".webp\"\n    ];\n    const ext = path__WEBPACK_IMPORTED_MODULE_3___default().extname(file.name).toLowerCase();\n    if (!validExtensions.includes(ext)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid file type. Allowed: PNG, JPG, JPEG, WEBP\"\n        }, {\n            status: 400\n        });\n    }\n    // Get file buffer and compute MD5\n    const bytes = await file.arrayBuffer();\n    const buffer = Buffer.from(bytes);\n    const md5Hash = crypto__WEBPACK_IMPORTED_MODULE_4___default().createHash(\"md5\").update(buffer).digest(\"hex\");\n    const newFilename = `${md5Hash}${ext}`;\n    // Storage path: public/boxes/{box_id}/mockups/{md5}.{ext}\n    const targetDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"public\", \"boxes\", boxId, \"mockups\");\n    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_2__.mkdir)(targetDir, {\n        recursive: true\n    });\n    const targetPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(targetDir, newFilename);\n    const relativePath = `/boxes/${boxId}/mockups/${newFilename}`;\n    // Delete existing image of this type for this box\n    const { data: existing } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    if (existing && existing.length > 0) {\n        for (const img of existing){\n            await deleteImageFile(img.image_path);\n        }\n        await supabase.from(\"mockup_images\").delete().eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    }\n    // Write new file\n    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_2__.writeFile)(targetPath, buffer);\n    // Create DB record\n    const newImageData = {\n        id: md5Hash,\n        box_id: boxId,\n        image_path: relativePath,\n        image_type: imageType,\n        display_order: imageType === \"BOX_MAIN\" ? 1 : 2,\n        created_at: new Date().toISOString()\n    };\n    const { error } = await supabase.from(\"mockup_images\").insert(newImageData);\n    if (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n    console.log(\"[MOCKUPS] Created\", imageType, \"for box:\", boxId);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        image: newImageData,\n        message: `${imageType} image uploaded successfully`\n    });\n}\n// Helper: Handle ZIP upload for card mockups\nasync function handleCardMockupsZip(supabase, zipFile, boxId) {\n    // Get ZIP buffer\n    const bytes = await zipFile.arrayBuffer();\n    const buffer = Buffer.from(bytes);\n    // Check file size (max 50MB)\n    const maxSize = 50 * 1024 * 1024;\n    if (buffer.length > maxSize) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"ZIP file too large. Maximum size is 50MB\"\n        }, {\n            status: 400\n        });\n    }\n    // Extract ZIP\n    let zip;\n    try {\n        zip = new (adm_zip__WEBPACK_IMPORTED_MODULE_5___default())(buffer);\n    } catch (err) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid ZIP file format\"\n        }, {\n            status: 400\n        });\n    }\n    const zipEntries = zip.getEntries();\n    // Filter for image files only\n    const imageEntries = zipEntries.filter((entry)=>{\n        const name = entry.entryName.toLowerCase();\n        if (entry.isDirectory) return false;\n        if (name.includes(\"__macosx\")) return false;\n        if (name.startsWith(\".\")) return false;\n        if (path__WEBPACK_IMPORTED_MODULE_3___default().basename(name).startsWith(\".\")) return false;\n        return /\\.(png|jpg|jpeg|webp)$/i.test(name);\n    });\n    if (imageEntries.length === 0) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"No valid images found in ZIP (PNG, JPG, JPEG, WEBP)\"\n        }, {\n            status: 400\n        });\n    }\n    // Check max image count (300)\n    if (imageEntries.length > 300) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: `Too many images (${imageEntries.length}). Maximum is 300`\n        }, {\n            status: 400\n        });\n    }\n    console.log(\"[MOCKUPS] Found\", imageEntries.length, \"images in ZIP for box:\", boxId);\n    // Delete existing card mockups for this box\n    await deleteMockupsByType(supabase, boxId, \"CARD\");\n    // Target directory: public/boxes/{box_id}/mockups/cards/\n    const targetDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"public\", \"boxes\", boxId, \"mockups\", \"cards\");\n    // Clean and recreate directory\n    try {\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_2__.rm)(targetDir, {\n            recursive: true,\n            force: true\n        });\n    } catch (err) {\n    // Directory might not exist\n    }\n    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_2__.mkdir)(targetDir, {\n        recursive: true\n    });\n    // Sort entries by filename (natural sort) - this determines display_order\n    imageEntries.sort((a, b)=>{\n        const nameA = path__WEBPACK_IMPORTED_MODULE_3___default().basename(a.entryName).toLowerCase();\n        const nameB = path__WEBPACK_IMPORTED_MODULE_3___default().basename(b.entryName).toLowerCase();\n        return nameA.localeCompare(nameB, undefined, {\n            numeric: true,\n            sensitivity: \"base\"\n        });\n    });\n    // Process each image with display_order based on sorted position\n    const createdMockups = [];\n    const errors = [];\n    for(let i = 0; i < imageEntries.length; i++){\n        const entry = imageEntries[i];\n        const displayOrder = i + 1 // 1-based display order\n        ;\n        try {\n            const fileBuffer = entry.getData();\n            const md5Hash = crypto__WEBPACK_IMPORTED_MODULE_4___default().createHash(\"md5\").update(fileBuffer).digest(\"hex\");\n            const originalExt = path__WEBPACK_IMPORTED_MODULE_3___default().extname(entry.entryName).toLowerCase() || \".png\";\n            const newFilename = `${md5Hash}${originalExt}`;\n            const targetPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(targetDir, newFilename);\n            const relativePath = `/boxes/${boxId}/mockups/cards/${newFilename}`;\n            // Write file\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_2__.writeFile)(targetPath, fileBuffer);\n            // Create DB record with display_order\n            const { error: dbError } = await supabase.from(\"mockup_images\").insert({\n                id: `${boxId}_card_${md5Hash}`,\n                box_id: boxId,\n                image_path: relativePath,\n                image_type: \"CARD\",\n                display_order: displayOrder,\n                created_at: new Date().toISOString()\n            });\n            if (dbError) {\n                errors.push({\n                    file: entry.entryName,\n                    error: dbError.message\n                });\n            } else {\n                createdMockups.push({\n                    id: `${boxId}_card_${md5Hash}`,\n                    originalFile: path__WEBPACK_IMPORTED_MODULE_3___default().basename(entry.entryName),\n                    imagePath: relativePath,\n                    displayOrder: displayOrder\n                });\n            }\n        } catch (err) {\n            errors.push({\n                file: entry.entryName,\n                error: err.message\n            });\n        }\n    }\n    console.log(\"[MOCKUPS] Created\", createdMockups.length, \"card mockups for box:\", boxId);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        message: `Uploaded ${createdMockups.length} card mockup images`,\n        created: createdMockups.length,\n        mockups: createdMockups,\n        errors: errors.length > 0 ? errors : undefined\n    });\n}\n// Helper: Delete mockups by type\nasync function deleteMockupsByType(supabase, boxId, imageType) {\n    const { data: mockups } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    if (!mockups || mockups.length === 0) return 0;\n    // Delete files\n    for (const img of mockups){\n        await deleteImageFile(img.image_path);\n    }\n    // Delete from DB\n    await supabase.from(\"mockup_images\").delete().eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    return mockups.length;\n}\n// Helper: Delete all mockups for a box\nasync function deleteAllMockupsForBox(supabase, boxId) {\n    const { data: mockups } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId);\n    if (!mockups || mockups.length === 0) return 0;\n    // Delete files\n    for (const img of mockups){\n        await deleteImageFile(img.image_path);\n    }\n    // Delete directory\n    const boxDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"public\", \"boxes\", boxId, \"mockups\");\n    try {\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_2__.rm)(boxDir, {\n            recursive: true,\n            force: true\n        });\n    } catch (err) {\n    // Directory might not exist\n    }\n    // Delete from DB\n    await supabase.from(\"mockup_images\").delete().eq(\"box_id\", boxId);\n    return mockups.length;\n}\n// Helper: Delete a single image file\nasync function deleteImageFile(imagePath) {\n    if (!imagePath) return;\n    try {\n        const filePath = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"public\", imagePath.replace(/^\\//, \"\"));\n        if ((0,fs__WEBPACK_IMPORTED_MODULE_6__.existsSync)(filePath)) {\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_2__.rm)(filePath, {\n                force: true\n            });\n        }\n    } catch (err) {\n        console.warn(\"[MOCKUPS] Could not delete file:\", imagePath, err.message);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0NMLFdBQVc1QixJQUFJeEUsT0FBTztJQUN6RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXN3ZWFsbGFyZS1hZG1pbi8uL2FwcC9hcGkvYWRtaW4vbW9ja3Vwcy9yb3V0ZS5qcz80NmJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY3JlYXRlU3VwYWJhc2VTZXJ2ZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvc3VwYWJhc2Utc2VydmVyJ1xuaW1wb3J0IHsgd3JpdGVGaWxlLCBta2Rpciwgcm0sIHJlYWRGaWxlIH0gZnJvbSAnZnMvcHJvbWlzZXMnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5pbXBvcnQgQWRtWmlwIGZyb20gJ2FkbS16aXAnXG5pbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSAnZnMnXG5cbi8vIEhlbHBlciB0byBnZXQgYXV0aGVudGljYXRlZCB1c2VyIChzdXBwb3J0cyBib3RoIGxvY2FsIGFuZCBTdXBhYmFzZSlcbmFzeW5jIGZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0ZWRVc2VyKCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTE9DQUxfTU9ERSA9PT0gJ3RydWUnKSB7XG4gICAgY29uc3QgeyBjb29raWVzIH0gPSBhd2FpdCBpbXBvcnQoJ25leHQvaGVhZGVycycpXG4gICAgY29uc3QgeyBnZXRVc2VyRnJvbVRva2VuIH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uLy4uL2xpYi9hdXRoLWxvY2FsJylcbiAgICBcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGNvb2tpZXMoKVxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoLXRva2VuJyk/LnZhbHVlXG4gICAgXG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckZyb21Ub2tlbih0b2tlbilcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB7IHVzZXIsIGVycm9yOiBudWxsIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgdXNlcjogbnVsbCwgZXJyb3I6ICdOb3QgYXV0aGVudGljYXRlZCcgfVxuICB9XG4gIFxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVN1cGFiYXNlU2VydmVyKClcbiAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gIHJldHVybiB7IHVzZXIsIGVycm9yIH1cbn1cblxuLy8gQWRtaW4gZW1haWwgKGZvciBTdXBhYmFzZSBtb2RlKVxuY29uc3QgQURNSU5fRU1BSUwgPSAnbW9jYXNpbkBnbWFpbC5jb20nXG5cbmZ1bmN0aW9uIGlzQXV0aG9yaXplZCh1c2VyKSB7XG4gIGNvbnN0IGlzTG9jYWxNb2RlID0gcHJvY2Vzcy5lbnYuTE9DQUxfTU9ERSA9PT0gJ3RydWUnXG4gIHJldHVybiBpc0xvY2FsTW9kZSBcbiAgICA/ICh1c2VyICE9PSBudWxsKVxuICAgIDogKHVzZXIgJiYgKHVzZXIuZW1haWwgPT09IEFETUlOX0VNQUlMIHx8IHVzZXIuaXNfYWRtaW4pKVxufVxuXG4vLyBHRVQgLSBGZXRjaCBtb2NrdXAgaW1hZ2VzIGZvciBhIGJveFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU3VwYWJhc2VTZXJ2ZXIoKVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXIsIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKClcbiAgICBcbiAgICBpZiAoYXV0aEVycm9yIHx8ICFpc0F1dGhvcml6ZWQodXNlcikpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IGJveElkID0gc2VhcmNoUGFyYW1zLmdldCgnYm94SWQnKVxuICAgIFxuICAgIGlmICghYm94SWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnYm94SWQgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IGFsbCBtb2NrdXAgaW1hZ2VzIGZvciB0aGlzIGJveCwgb3JkZXJlZCBieSBkaXNwbGF5X29yZGVyIHRoZW4gY3JlYXRlZF9hdFxuICAgIGNvbnN0IHsgZGF0YTogbW9ja3VwcywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbW9ja3VwX2ltYWdlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnYm94X2lkJywgYm94SWQpXG4gICAgICAub3JkZXIoJ2Rpc3BsYXlfb3JkZXInLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gU2VwYXJhdGUgYnkgdHlwZVxuICAgIGNvbnN0IG1haW5JbWFnZSA9IG1vY2t1cHM/LmZpbmQobSA9PiBtLmltYWdlX3R5cGUgPT09ICdCT1hfTUFJTicpIHx8IG51bGxcbiAgICBjb25zdCBzZWNvbmRhcnlJbWFnZSA9IG1vY2t1cHM/LmZpbmQobSA9PiBtLmltYWdlX3R5cGUgPT09ICdCT1hfU0VDT05EQVJZJykgfHwgbnVsbFxuICAgIGNvbnN0IGNhcmRNb2NrdXBzID0gKG1vY2t1cHMgfHwgW10pXG4gICAgICAuZmlsdGVyKG0gPT4gbS5pbWFnZV90eXBlID09PSAnQ0FSRCcpXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGJveElkLFxuICAgICAgbWFpbkltYWdlLFxuICAgICAgc2Vjb25kYXJ5SW1hZ2UsXG4gICAgICBjYXJkTW9ja3VwcyxcbiAgICAgIHRvdGFsQ291bnQ6IG1vY2t1cHM/Lmxlbmd0aCB8fCAwXG4gICAgfSlcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTU9DS1VQUyBHRVRdIEVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG4vLyBQT1NUIC0gVXBsb2FkIG1vY2t1cCBpbWFnZShzKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVN1cGFiYXNlU2VydmVyKClcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VyLCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkVXNlcigpXG4gICAgXG4gICAgaWYgKGF1dGhFcnJvciB8fCAhaXNBdXRob3JpemVkKHVzZXIpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKVxuICAgIGNvbnN0IGZpbGUgPSBmb3JtRGF0YS5nZXQoJ2ZpbGUnKVxuICAgIGNvbnN0IGJveElkID0gZm9ybURhdGEuZ2V0KCdib3hJZCcpXG4gICAgY29uc3QgaW1hZ2VUeXBlID0gZm9ybURhdGEuZ2V0KCdpbWFnZVR5cGUnKSAvLyAnQk9YX01BSU4nLCAnQk9YX1NFQ09OREFSWScsIG9yICdDQVJEX1pJUCdcbiAgICBcbiAgICBpZiAoIWZpbGUgfHwgIWJveElkIHx8ICFpbWFnZVR5cGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBmaWxlLCBib3hJZCwgaW1hZ2VUeXBlJyBcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgaW1hZ2VUeXBlXG4gICAgY29uc3QgdmFsaWRUeXBlcyA9IFsnQk9YX01BSU4nLCAnQk9YX1NFQ09OREFSWScsICdDQVJEX1pJUCddXG4gICAgaWYgKCF2YWxpZFR5cGVzLmluY2x1ZGVzKGltYWdlVHlwZSkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBlcnJvcjogYEludmFsaWQgaW1hZ2VUeXBlLiBNdXN0IGJlIG9uZSBvZjogJHt2YWxpZFR5cGVzLmpvaW4oJywgJyl9YCBcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1tNT0NLVVBTIFBPU1RdIFByb2Nlc3Npbmc6JywgeyBib3hJZCwgaW1hZ2VUeXBlLCBmaWxlTmFtZTogZmlsZS5uYW1lIH0pXG4gICAgXG4gICAgLy8gSGFuZGxlIFpJUCB1cGxvYWQgZm9yIGNhcmQgbW9ja3Vwc1xuICAgIGlmIChpbWFnZVR5cGUgPT09ICdDQVJEX1pJUCcpIHtcbiAgICAgIHJldHVybiBoYW5kbGVDYXJkTW9ja3Vwc1ppcChzdXBhYmFzZSwgZmlsZSwgYm94SWQpXG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBzaW5nbGUgaW1hZ2UgdXBsb2FkIChCT1hfTUFJTiBvciBCT1hfU0VDT05EQVJZKVxuICAgIHJldHVybiBoYW5kbGVTaW5nbGVJbWFnZVVwbG9hZChzdXBhYmFzZSwgZmlsZSwgYm94SWQsIGltYWdlVHlwZSlcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTU9DS1VQUyBQT1NUXSBFcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuLy8gREVMRVRFIC0gRGVsZXRlIG1vY2t1cCBpbWFnZShzKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU3VwYWJhc2VTZXJ2ZXIoKVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXIsIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKClcbiAgICBcbiAgICBpZiAoYXV0aEVycm9yIHx8ICFpc0F1dGhvcml6ZWQodXNlcikpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IGJveElkID0gc2VhcmNoUGFyYW1zLmdldCgnYm94SWQnKVxuICAgIGNvbnN0IGltYWdlSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdpbWFnZUlkJylcbiAgICBjb25zdCBkZWxldGVUeXBlID0gc2VhcmNoUGFyYW1zLmdldCgndHlwZScpIC8vICdhbGwnLCAnbWFpbicsICdzZWNvbmRhcnknLCAnY2FyZHMnLCBvciBzcGVjaWZpYyBpZFxuICAgIFxuICAgIGlmICghYm94SWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnYm94SWQgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgbGV0IGRlbGV0ZWRDb3VudCA9IDBcbiAgICBcbiAgICBpZiAoaW1hZ2VJZCkge1xuICAgICAgLy8gRGVsZXRlIHNwZWNpZmljIGltYWdlIGJ5IElEXG4gICAgICBjb25zdCB7IGRhdGE6IGltYWdlIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbW9ja3VwX2ltYWdlcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ2lkJywgaW1hZ2VJZClcbiAgICAgICAgLmVxKCdib3hfaWQnLCBib3hJZClcbiAgICAgICAgLnNpbmdsZSgpXG4gICAgICBcbiAgICAgIGlmIChpbWFnZSkge1xuICAgICAgICBhd2FpdCBkZWxldGVJbWFnZUZpbGUoaW1hZ2UuaW1hZ2VfcGF0aClcbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnbW9ja3VwX2ltYWdlcycpLmRlbGV0ZSgpLmVxKCdpZCcsIGltYWdlSWQpXG4gICAgICAgIGRlbGV0ZWRDb3VudCA9IDFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRlbGV0ZVR5cGUgPT09ICdhbGwnKSB7XG4gICAgICAvLyBEZWxldGUgYWxsIG1vY2t1cHMgZm9yIGJveFxuICAgICAgZGVsZXRlZENvdW50ID0gYXdhaXQgZGVsZXRlQWxsTW9ja3Vwc0ZvckJveChzdXBhYmFzZSwgYm94SWQpXG4gICAgfSBlbHNlIGlmIChkZWxldGVUeXBlID09PSAnbWFpbicpIHtcbiAgICAgIGRlbGV0ZWRDb3VudCA9IGF3YWl0IGRlbGV0ZU1vY2t1cHNCeVR5cGUoc3VwYWJhc2UsIGJveElkLCAnQk9YX01BSU4nKVxuICAgIH0gZWxzZSBpZiAoZGVsZXRlVHlwZSA9PT0gJ3NlY29uZGFyeScpIHtcbiAgICAgIGRlbGV0ZWRDb3VudCA9IGF3YWl0IGRlbGV0ZU1vY2t1cHNCeVR5cGUoc3VwYWJhc2UsIGJveElkLCAnQk9YX1NFQ09OREFSWScpXG4gICAgfSBlbHNlIGlmIChkZWxldGVUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICBkZWxldGVkQ291bnQgPSBhd2FpdCBkZWxldGVNb2NrdXBzQnlUeXBlKHN1cGFiYXNlLCBib3hJZCwgJ0NBUkQnKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdTcGVjaWZ5IGltYWdlSWQgb3IgdHlwZSAoYWxsLCBtYWluLCBzZWNvbmRhcnksIGNhcmRzKScgXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICBkZWxldGVkOiBkZWxldGVkQ291bnQgXG4gICAgfSlcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTU9DS1VQUyBERUxFVEVdIEVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG4vLyBQVVQgLSBVcGRhdGUgbW9ja3VwIGltYWdlIChkaXNwbGF5X29yZGVyKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU3VwYWJhc2VTZXJ2ZXIoKVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXIsIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKClcbiAgICBcbiAgICBpZiAoYXV0aEVycm9yIHx8ICFpc0F1dGhvcml6ZWQodXNlcikpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgaWQsIGRpc3BsYXlPcmRlciB9ID0gYm9keVxuICAgIFxuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnaWQgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgaWYgKGRpc3BsYXlPcmRlciA9PT0gdW5kZWZpbmVkIHx8IGRpc3BsYXlPcmRlciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdkaXNwbGF5T3JkZXIgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5X29yZGVyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdtb2NrdXBfaW1hZ2VzJylcbiAgICAgIC51cGRhdGUoeyBkaXNwbGF5X29yZGVyOiBwYXJzZUludChkaXNwbGF5T3JkZXIpIH0pXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdbTU9DS1VQUyBQVVRdIFVwZGF0ZWQgZGlzcGxheV9vcmRlciBmb3InLCBpZCwgJ3RvJywgZGlzcGxheU9yZGVyKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTU9DS1VQUyBQVVRdIEVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG4vLyBIZWxwZXI6IEhhbmRsZSBzaW5nbGUgaW1hZ2UgdXBsb2FkIChCT1hfTUFJTiBvciBCT1hfU0VDT05EQVJZKVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlU2luZ2xlSW1hZ2VVcGxvYWQoc3VwYWJhc2UsIGZpbGUsIGJveElkLCBpbWFnZVR5cGUpIHtcbiAgLy8gVmFsaWRhdGUgZmlsZSB0eXBlXG4gIGNvbnN0IHZhbGlkRXh0ZW5zaW9ucyA9IFsnLnBuZycsICcuanBnJywgJy5qcGVnJywgJy53ZWJwJ11cbiAgY29uc3QgZXh0ID0gcGF0aC5leHRuYW1lKGZpbGUubmFtZSkudG9Mb3dlckNhc2UoKVxuICBpZiAoIXZhbGlkRXh0ZW5zaW9ucy5pbmNsdWRlcyhleHQpKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogJ0ludmFsaWQgZmlsZSB0eXBlLiBBbGxvd2VkOiBQTkcsIEpQRywgSlBFRywgV0VCUCcgXG4gICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICB9XG4gIFxuICAvLyBHZXQgZmlsZSBidWZmZXIgYW5kIGNvbXB1dGUgTUQ1XG4gIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpXG4gIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKVxuICBjb25zdCBtZDVIYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgnaGV4JylcbiAgY29uc3QgbmV3RmlsZW5hbWUgPSBgJHttZDVIYXNofSR7ZXh0fWBcbiAgXG4gIC8vIFN0b3JhZ2UgcGF0aDogcHVibGljL2JveGVzL3tib3hfaWR9L21vY2t1cHMve21kNX0ue2V4dH1cbiAgY29uc3QgdGFyZ2V0RGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnYm94ZXMnLCBib3hJZCwgJ21vY2t1cHMnKVxuICBhd2FpdCBta2Rpcih0YXJnZXREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gIFxuICBjb25zdCB0YXJnZXRQYXRoID0gcGF0aC5qb2luKHRhcmdldERpciwgbmV3RmlsZW5hbWUpXG4gIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGAvYm94ZXMvJHtib3hJZH0vbW9ja3Vwcy8ke25ld0ZpbGVuYW1lfWBcbiAgXG4gIC8vIERlbGV0ZSBleGlzdGluZyBpbWFnZSBvZiB0aGlzIHR5cGUgZm9yIHRoaXMgYm94XG4gIGNvbnN0IHsgZGF0YTogZXhpc3RpbmcgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnYm94X2lkJywgYm94SWQpXG4gICAgLmVxKCdpbWFnZV90eXBlJywgaW1hZ2VUeXBlKVxuICBcbiAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGNvbnN0IGltZyBvZiBleGlzdGluZykge1xuICAgICAgYXdhaXQgZGVsZXRlSW1hZ2VGaWxlKGltZy5pbWFnZV9wYXRoKVxuICAgIH1cbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2JveF9pZCcsIGJveElkKVxuICAgICAgLmVxKCdpbWFnZV90eXBlJywgaW1hZ2VUeXBlKVxuICB9XG4gIFxuICAvLyBXcml0ZSBuZXcgZmlsZVxuICBhd2FpdCB3cml0ZUZpbGUodGFyZ2V0UGF0aCwgYnVmZmVyKVxuICBcbiAgLy8gQ3JlYXRlIERCIHJlY29yZFxuICBjb25zdCBuZXdJbWFnZURhdGEgPSB7XG4gICAgaWQ6IG1kNUhhc2gsXG4gICAgYm94X2lkOiBib3hJZCxcbiAgICBpbWFnZV9wYXRoOiByZWxhdGl2ZVBhdGgsXG4gICAgaW1hZ2VfdHlwZTogaW1hZ2VUeXBlLFxuICAgIGRpc3BsYXlfb3JkZXI6IGltYWdlVHlwZSA9PT0gJ0JPWF9NQUlOJyA/IDEgOiAyLCAgLy8gTWFpbj0xLCBTZWNvbmRhcnk9MlxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9XG4gIFxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtb2NrdXBfaW1hZ2VzJylcbiAgICAuaW5zZXJ0KG5ld0ltYWdlRGF0YSlcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ1tNT0NLVVBTXSBDcmVhdGVkJywgaW1hZ2VUeXBlLCAnZm9yIGJveDonLCBib3hJZClcbiAgXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICBpbWFnZTogbmV3SW1hZ2VEYXRhLFxuICAgIG1lc3NhZ2U6IGAke2ltYWdlVHlwZX0gaW1hZ2UgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5YFxuICB9KVxufVxuXG4vLyBIZWxwZXI6IEhhbmRsZSBaSVAgdXBsb2FkIGZvciBjYXJkIG1vY2t1cHNcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhcmRNb2NrdXBzWmlwKHN1cGFiYXNlLCB6aXBGaWxlLCBib3hJZCkge1xuICAvLyBHZXQgWklQIGJ1ZmZlclxuICBjb25zdCBieXRlcyA9IGF3YWl0IHppcEZpbGUuYXJyYXlCdWZmZXIoKVxuICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShieXRlcylcbiAgXG4gIC8vIENoZWNrIGZpbGUgc2l6ZSAobWF4IDUwTUIpXG4gIGNvbnN0IG1heFNpemUgPSA1MCAqIDEwMjQgKiAxMDI0XG4gIGlmIChidWZmZXIubGVuZ3RoID4gbWF4U2l6ZSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdaSVAgZmlsZSB0b28gbGFyZ2UuIE1heGltdW0gc2l6ZSBpcyA1ME1CJyBcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gIH1cbiAgXG4gIC8vIEV4dHJhY3QgWklQXG4gIGxldCB6aXBcbiAgdHJ5IHtcbiAgICB6aXAgPSBuZXcgQWRtWmlwKGJ1ZmZlcilcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIFpJUCBmaWxlIGZvcm1hdCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICB9XG4gIFxuICBjb25zdCB6aXBFbnRyaWVzID0gemlwLmdldEVudHJpZXMoKVxuICBcbiAgLy8gRmlsdGVyIGZvciBpbWFnZSBmaWxlcyBvbmx5XG4gIGNvbnN0IGltYWdlRW50cmllcyA9IHppcEVudHJpZXMuZmlsdGVyKGVudHJ5ID0+IHtcbiAgICBjb25zdCBuYW1lID0gZW50cnkuZW50cnlOYW1lLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoZW50cnkuaXNEaXJlY3RvcnkpIHJldHVybiBmYWxzZVxuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdfX21hY29zeCcpKSByZXR1cm4gZmFsc2VcbiAgICBpZiAobmFtZS5zdGFydHNXaXRoKCcuJykpIHJldHVybiBmYWxzZVxuICAgIGlmIChwYXRoLmJhc2VuYW1lKG5hbWUpLnN0YXJ0c1dpdGgoJy4nKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIC9cXC4ocG5nfGpwZ3xqcGVnfHdlYnApJC9pLnRlc3QobmFtZSlcbiAgfSlcbiAgXG4gIGlmIChpbWFnZUVudHJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogJ05vIHZhbGlkIGltYWdlcyBmb3VuZCBpbiBaSVAgKFBORywgSlBHLCBKUEVHLCBXRUJQKScgXG4gICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICB9XG4gIFxuICAvLyBDaGVjayBtYXggaW1hZ2UgY291bnQgKDMwMClcbiAgaWYgKGltYWdlRW50cmllcy5sZW5ndGggPiAzMDApIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiBgVG9vIG1hbnkgaW1hZ2VzICgke2ltYWdlRW50cmllcy5sZW5ndGh9KS4gTWF4aW11bSBpcyAzMDBgIFxuICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ1tNT0NLVVBTXSBGb3VuZCcsIGltYWdlRW50cmllcy5sZW5ndGgsICdpbWFnZXMgaW4gWklQIGZvciBib3g6JywgYm94SWQpXG4gIFxuICAvLyBEZWxldGUgZXhpc3RpbmcgY2FyZCBtb2NrdXBzIGZvciB0aGlzIGJveFxuICBhd2FpdCBkZWxldGVNb2NrdXBzQnlUeXBlKHN1cGFiYXNlLCBib3hJZCwgJ0NBUkQnKVxuICBcbiAgLy8gVGFyZ2V0IGRpcmVjdG9yeTogcHVibGljL2JveGVzL3tib3hfaWR9L21vY2t1cHMvY2FyZHMvXG4gIGNvbnN0IHRhcmdldERpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2JveGVzJywgYm94SWQsICdtb2NrdXBzJywgJ2NhcmRzJylcbiAgXG4gIC8vIENsZWFuIGFuZCByZWNyZWF0ZSBkaXJlY3RvcnlcbiAgdHJ5IHtcbiAgICBhd2FpdCBybSh0YXJnZXREaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBEaXJlY3RvcnkgbWlnaHQgbm90IGV4aXN0XG4gIH1cbiAgYXdhaXQgbWtkaXIodGFyZ2V0RGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICBcbiAgLy8gU29ydCBlbnRyaWVzIGJ5IGZpbGVuYW1lIChuYXR1cmFsIHNvcnQpIC0gdGhpcyBkZXRlcm1pbmVzIGRpc3BsYXlfb3JkZXJcbiAgaW1hZ2VFbnRyaWVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBuYW1lQSA9IHBhdGguYmFzZW5hbWUoYS5lbnRyeU5hbWUpLnRvTG93ZXJDYXNlKClcbiAgICBjb25zdCBuYW1lQiA9IHBhdGguYmFzZW5hbWUoYi5lbnRyeU5hbWUpLnRvTG93ZXJDYXNlKClcbiAgICByZXR1cm4gbmFtZUEubG9jYWxlQ29tcGFyZShuYW1lQiwgdW5kZWZpbmVkLCB7IG51bWVyaWM6IHRydWUsIHNlbnNpdGl2aXR5OiAnYmFzZScgfSlcbiAgfSlcbiAgXG4gIC8vIFByb2Nlc3MgZWFjaCBpbWFnZSB3aXRoIGRpc3BsYXlfb3JkZXIgYmFzZWQgb24gc29ydGVkIHBvc2l0aW9uXG4gIGNvbnN0IGNyZWF0ZWRNb2NrdXBzID0gW11cbiAgY29uc3QgZXJyb3JzID0gW11cbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VFbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZW50cnkgPSBpbWFnZUVudHJpZXNbaV1cbiAgICBjb25zdCBkaXNwbGF5T3JkZXIgPSBpICsgMSAgLy8gMS1iYXNlZCBkaXNwbGF5IG9yZGVyXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSBlbnRyeS5nZXREYXRhKClcbiAgICAgIGNvbnN0IG1kNUhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JykudXBkYXRlKGZpbGVCdWZmZXIpLmRpZ2VzdCgnaGV4JylcbiAgICAgIGNvbnN0IG9yaWdpbmFsRXh0ID0gcGF0aC5leHRuYW1lKGVudHJ5LmVudHJ5TmFtZSkudG9Mb3dlckNhc2UoKSB8fCAnLnBuZydcbiAgICAgIGNvbnN0IG5ld0ZpbGVuYW1lID0gYCR7bWQ1SGFzaH0ke29yaWdpbmFsRXh0fWBcbiAgICAgIFxuICAgICAgY29uc3QgdGFyZ2V0UGF0aCA9IHBhdGguam9pbih0YXJnZXREaXIsIG5ld0ZpbGVuYW1lKVxuICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gYC9ib3hlcy8ke2JveElkfS9tb2NrdXBzL2NhcmRzLyR7bmV3RmlsZW5hbWV9YFxuICAgICAgXG4gICAgICAvLyBXcml0ZSBmaWxlXG4gICAgICBhd2FpdCB3cml0ZUZpbGUodGFyZ2V0UGF0aCwgZmlsZUJ1ZmZlcilcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIERCIHJlY29yZCB3aXRoIGRpc3BsYXlfb3JkZXJcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGRiRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdtb2NrdXBfaW1hZ2VzJylcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgaWQ6IGAke2JveElkfV9jYXJkXyR7bWQ1SGFzaH1gLFxuICAgICAgICAgIGJveF9pZDogYm94SWQsXG4gICAgICAgICAgaW1hZ2VfcGF0aDogcmVsYXRpdmVQYXRoLFxuICAgICAgICAgIGltYWdlX3R5cGU6ICdDQVJEJyxcbiAgICAgICAgICBkaXNwbGF5X29yZGVyOiBkaXNwbGF5T3JkZXIsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChkYkVycm9yKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKHsgZmlsZTogZW50cnkuZW50cnlOYW1lLCBlcnJvcjogZGJFcnJvci5tZXNzYWdlIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjcmVhdGVkTW9ja3Vwcy5wdXNoKHtcbiAgICAgICAgICBpZDogYCR7Ym94SWR9X2NhcmRfJHttZDVIYXNofWAsXG4gICAgICAgICAgb3JpZ2luYWxGaWxlOiBwYXRoLmJhc2VuYW1lKGVudHJ5LmVudHJ5TmFtZSksXG4gICAgICAgICAgaW1hZ2VQYXRoOiByZWxhdGl2ZVBhdGgsXG4gICAgICAgICAgZGlzcGxheU9yZGVyOiBkaXNwbGF5T3JkZXJcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGVycm9ycy5wdXNoKHsgZmlsZTogZW50cnkuZW50cnlOYW1lLCBlcnJvcjogZXJyLm1lc3NhZ2UgfSlcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKCdbTU9DS1VQU10gQ3JlYXRlZCcsIGNyZWF0ZWRNb2NrdXBzLmxlbmd0aCwgJ2NhcmQgbW9ja3VwcyBmb3IgYm94OicsIGJveElkKVxuICBcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIG1lc3NhZ2U6IGBVcGxvYWRlZCAke2NyZWF0ZWRNb2NrdXBzLmxlbmd0aH0gY2FyZCBtb2NrdXAgaW1hZ2VzYCxcbiAgICBjcmVhdGVkOiBjcmVhdGVkTW9ja3Vwcy5sZW5ndGgsXG4gICAgbW9ja3VwczogY3JlYXRlZE1vY2t1cHMsXG4gICAgZXJyb3JzOiBlcnJvcnMubGVuZ3RoID4gMCA/IGVycm9ycyA6IHVuZGVmaW5lZFxuICB9KVxufVxuXG4vLyBIZWxwZXI6IERlbGV0ZSBtb2NrdXBzIGJ5IHR5cGVcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU1vY2t1cHNCeVR5cGUoc3VwYWJhc2UsIGJveElkLCBpbWFnZVR5cGUpIHtcbiAgY29uc3QgeyBkYXRhOiBtb2NrdXBzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtb2NrdXBfaW1hZ2VzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ2JveF9pZCcsIGJveElkKVxuICAgIC5lcSgnaW1hZ2VfdHlwZScsIGltYWdlVHlwZSlcbiAgXG4gIGlmICghbW9ja3VwcyB8fCBtb2NrdXBzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcbiAgXG4gIC8vIERlbGV0ZSBmaWxlc1xuICBmb3IgKGNvbnN0IGltZyBvZiBtb2NrdXBzKSB7XG4gICAgYXdhaXQgZGVsZXRlSW1hZ2VGaWxlKGltZy5pbWFnZV9wYXRoKVxuICB9XG4gIFxuICAvLyBEZWxldGUgZnJvbSBEQlxuICBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtb2NrdXBfaW1hZ2VzJylcbiAgICAuZGVsZXRlKClcbiAgICAuZXEoJ2JveF9pZCcsIGJveElkKVxuICAgIC5lcSgnaW1hZ2VfdHlwZScsIGltYWdlVHlwZSlcbiAgXG4gIHJldHVybiBtb2NrdXBzLmxlbmd0aFxufVxuXG4vLyBIZWxwZXI6IERlbGV0ZSBhbGwgbW9ja3VwcyBmb3IgYSBib3hcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFsbE1vY2t1cHNGb3JCb3goc3VwYWJhc2UsIGJveElkKSB7XG4gIGNvbnN0IHsgZGF0YTogbW9ja3VwcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbW9ja3VwX2ltYWdlcycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdib3hfaWQnLCBib3hJZClcbiAgXG4gIGlmICghbW9ja3VwcyB8fCBtb2NrdXBzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcbiAgXG4gIC8vIERlbGV0ZSBmaWxlc1xuICBmb3IgKGNvbnN0IGltZyBvZiBtb2NrdXBzKSB7XG4gICAgYXdhaXQgZGVsZXRlSW1hZ2VGaWxlKGltZy5pbWFnZV9wYXRoKVxuICB9XG4gIFxuICAvLyBEZWxldGUgZGlyZWN0b3J5XG4gIGNvbnN0IGJveERpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2JveGVzJywgYm94SWQsICdtb2NrdXBzJylcbiAgdHJ5IHtcbiAgICBhd2FpdCBybShib3hEaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBEaXJlY3RvcnkgbWlnaHQgbm90IGV4aXN0XG4gIH1cbiAgXG4gIC8vIERlbGV0ZSBmcm9tIERCXG4gIGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5lcSgnYm94X2lkJywgYm94SWQpXG4gIFxuICByZXR1cm4gbW9ja3Vwcy5sZW5ndGhcbn1cblxuLy8gSGVscGVyOiBEZWxldGUgYSBzaW5nbGUgaW1hZ2UgZmlsZVxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlSW1hZ2VGaWxlKGltYWdlUGF0aCkge1xuICBpZiAoIWltYWdlUGF0aCkgcmV0dXJuXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCBpbWFnZVBhdGgucmVwbGFjZSgvXlxcLy8sICcnKSlcbiAgICBpZiAoZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICAgIGF3YWl0IHJtKGZpbGVQYXRoLCB7IGZvcmNlOiB0cnVlIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oJ1tNT0NLVVBTXSBDb3VsZCBub3QgZGVsZXRlIGZpbGU6JywgaW1hZ2VQYXRoLCBlcnIubWVzc2FnZSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZVN1cGFiYXNlU2VydmVyIiwid3JpdGVGaWxlIiwibWtkaXIiLCJybSIsInJlYWRGaWxlIiwicGF0aCIsImNyeXB0byIsIkFkbVppcCIsImV4aXN0c1N5bmMiLCJnZXRBdXRoZW50aWNhdGVkVXNlciIsInByb2Nlc3MiLCJlbnYiLCJMT0NBTF9NT0RFIiwiY29va2llcyIsImdldFVzZXJGcm9tVG9rZW4iLCJjb29raWVTdG9yZSIsInRva2VuIiwiZ2V0IiwidmFsdWUiLCJ1c2VyIiwiZXJyb3IiLCJzdXBhYmFzZSIsImRhdGEiLCJhdXRoIiwiZ2V0VXNlciIsIkFETUlOX0VNQUlMIiwiaXNBdXRob3JpemVkIiwiaXNMb2NhbE1vZGUiLCJlbWFpbCIsImlzX2FkbWluIiwiR0VUIiwicmVxdWVzdCIsImF1dGhFcnJvciIsImpzb24iLCJzdGF0dXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJib3hJZCIsIm1vY2t1cHMiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsIm1lc3NhZ2UiLCJtYWluSW1hZ2UiLCJmaW5kIiwibSIsImltYWdlX3R5cGUiLCJzZWNvbmRhcnlJbWFnZSIsImNhcmRNb2NrdXBzIiwiZmlsdGVyIiwidG90YWxDb3VudCIsImxlbmd0aCIsImNvbnNvbGUiLCJQT1NUIiwiZm9ybURhdGEiLCJmaWxlIiwiaW1hZ2VUeXBlIiwidmFsaWRUeXBlcyIsImluY2x1ZGVzIiwiam9pbiIsImxvZyIsImZpbGVOYW1lIiwibmFtZSIsImhhbmRsZUNhcmRNb2NrdXBzWmlwIiwiaGFuZGxlU2luZ2xlSW1hZ2VVcGxvYWQiLCJERUxFVEUiLCJpbWFnZUlkIiwiZGVsZXRlVHlwZSIsImRlbGV0ZWRDb3VudCIsImltYWdlIiwic2luZ2xlIiwiZGVsZXRlSW1hZ2VGaWxlIiwiaW1hZ2VfcGF0aCIsImRlbGV0ZSIsImRlbGV0ZUFsbE1vY2t1cHNGb3JCb3giLCJkZWxldGVNb2NrdXBzQnlUeXBlIiwic3VjY2VzcyIsImRlbGV0ZWQiLCJQVVQiLCJib2R5IiwiaWQiLCJkaXNwbGF5T3JkZXIiLCJ1bmRlZmluZWQiLCJ1cGRhdGUiLCJkaXNwbGF5X29yZGVyIiwicGFyc2VJbnQiLCJ2YWxpZEV4dGVuc2lvbnMiLCJleHQiLCJleHRuYW1lIiwidG9Mb3dlckNhc2UiLCJieXRlcyIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwibWQ1SGFzaCIsImNyZWF0ZUhhc2giLCJkaWdlc3QiLCJuZXdGaWxlbmFtZSIsInRhcmdldERpciIsImN3ZCIsInJlY3Vyc2l2ZSIsInRhcmdldFBhdGgiLCJyZWxhdGl2ZVBhdGgiLCJleGlzdGluZyIsImltZyIsIm5ld0ltYWdlRGF0YSIsImJveF9pZCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpbnNlcnQiLCJ6aXBGaWxlIiwibWF4U2l6ZSIsInppcCIsImVyciIsInppcEVudHJpZXMiLCJnZXRFbnRyaWVzIiwiaW1hZ2VFbnRyaWVzIiwiZW50cnkiLCJlbnRyeU5hbWUiLCJpc0RpcmVjdG9yeSIsInN0YXJ0c1dpdGgiLCJiYXNlbmFtZSIsInRlc3QiLCJmb3JjZSIsInNvcnQiLCJhIiwiYiIsIm5hbWVBIiwibmFtZUIiLCJsb2NhbGVDb21wYXJlIiwibnVtZXJpYyIsInNlbnNpdGl2aXR5IiwiY3JlYXRlZE1vY2t1cHMiLCJlcnJvcnMiLCJpIiwiZmlsZUJ1ZmZlciIsImdldERhdGEiLCJvcmlnaW5hbEV4dCIsImRiRXJyb3IiLCJwdXNoIiwib3JpZ2luYWxGaWxlIiwiaW1hZ2VQYXRoIiwiY3JlYXRlZCIsImJveERpciIsImZpbGVQYXRoIiwicmVwbGFjZSIsIndhcm4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/mockups/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/db-local.js":
/*!*************************!*\
  !*** ./lib/db-local.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLocalClient: () => (/* binding */ createLocalClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n// Local PostgreSQL Database Client\n// Used when LOCAL_MODE=true\n\nlet pool = null;\nfunction getPool() {\n    if (!pool) {\n        const connectionString = process.env.DATABASE_URL || \"postgresql://postgres:postgres@localhost:5432/asweallare\";\n        console.log(\"[DB-LOCAL] Creating pool with:\", connectionString.replace(/:[^:@]+@/, \":***@\"));\n        pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n            connectionString\n        });\n        pool.on(\"error\", (err)=>{\n            console.error(\"[DB-LOCAL] Pool error:\", err.message);\n        });\n    }\n    return pool;\n}\nasync function query(text, params) {\n    const pool = getPool();\n    try {\n        const result = await pool.query(text, params);\n        return result;\n    } catch (error) {\n        console.error(\"[DB-LOCAL] Query error:\", error.message);\n        console.error(\"[DB-LOCAL] Query was:\", text);\n        throw error;\n    }\n}\n// Helper to mimic Supabase response format\nfunction createLocalClient() {\n    return {\n        from: (table)=>new QueryBuilder(table),\n        auth: {\n            getUser: async ()=>{\n                // In local mode, return a mock admin user\n                return {\n                    data: {\n                        user: {\n                            id: \"00000000-0000-0000-0000-000000000001\",\n                            email: \"admin@local.dev\"\n                        }\n                    },\n                    error: null\n                };\n            },\n            getSession: async ()=>{\n                return {\n                    data: {\n                        session: {\n                            user: {\n                                id: \"00000000-0000-0000-0000-000000000001\",\n                                email: \"admin@local.dev\"\n                            }\n                        }\n                    },\n                    error: null\n                };\n            },\n            signOut: async ()=>({\n                    error: null\n                }),\n            onAuthStateChange: ()=>({\n                    data: {\n                        subscription: {\n                            unsubscribe: ()=>{}\n                        }\n                    }\n                })\n        }\n    };\n}\nclass QueryBuilder {\n    constructor(table){\n        this.table = table;\n        this._select = \"*\";\n        this._where = [];\n        this._whereParams = [];\n        this._order = null;\n        this._single = false;\n        this._limit = null;\n        this._returnData = true;\n        this._operation = null // 'update', 'delete', or null for select\n        ;\n        this._updateData = null;\n    }\n    select(columns = \"*\") {\n        // Handle Supabase-style nested selects by stripping them\n        // e.g., '*, piles(slug, name)' becomes '*'\n        if (columns.includes(\"(\")) {\n            this._select = columns.split(\",\").filter((c)=>!c.includes(\"(\")).map((c)=>c.trim()).join(\", \") || \"*\";\n        } else {\n            this._select = columns;\n        }\n        return this;\n    }\n    eq(column, value) {\n        this._whereParams.push(value);\n        this._where.push(`\"${column}\" = $${this._whereParams.length}`);\n        return this;\n    }\n    neq(column, value) {\n        this._whereParams.push(value);\n        this._where.push(`\"${column}\" != $${this._whereParams.length}`);\n        return this;\n    }\n    in(column, values) {\n        if (values && values.length > 0) {\n            const placeholders = values.map((_, i)=>`$${this._whereParams.length + i + 1}`).join(\", \");\n            this._whereParams.push(...values);\n            this._where.push(`\"${column}\" IN (${placeholders})`);\n        }\n        // If empty array, don't add any condition (will return all or be filtered by other conditions)\n        return this;\n    }\n    order(column, { ascending = true } = {}) {\n        this._order = `\"${column}\" ${ascending ? \"ASC\" : \"DESC\"}`;\n        return this;\n    }\n    limit(count) {\n        this._limit = count;\n        return this;\n    }\n    single() {\n        this._single = true;\n        this._limit = 1;\n        return this;\n    }\n    // Execute SELECT query\n    async then(resolve, reject) {\n        try {\n            let sql = `SELECT ${this._select} FROM \"${this.table}\"`;\n            if (this._where.length > 0) {\n                sql += ` WHERE ${this._where.join(\" AND \")}`;\n            }\n            if (this._order) {\n                sql += ` ORDER BY ${this._order}`;\n            }\n            if (this._limit) {\n                sql += ` LIMIT ${this._limit}`;\n            }\n            console.log(\"[DB-LOCAL] Executing:\", sql, \"with params:\", this._whereParams);\n            const result = await query(sql, this._whereParams);\n            if (this._single) {\n                resolve({\n                    data: result.rows[0] || null,\n                    error: null\n                });\n            } else {\n                resolve({\n                    data: result.rows,\n                    error: null\n                });\n            }\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Query failed:\", error.message);\n            if (reject) {\n                reject(error);\n            } else {\n                resolve({\n                    data: null,\n                    error\n                });\n            }\n        }\n    }\n    async insert(data) {\n        try {\n            // Handle array of objects\n            const records = Array.isArray(data) ? data : [\n                data\n            ];\n            const results = [];\n            for (const record of records){\n                const keys = Object.keys(record);\n                const values = Object.values(record);\n                const placeholders = values.map((_, i)=>`$${i + 1}`).join(\", \");\n                const quotedKeys = keys.map((k)=>`\"${k}\"`).join(\", \");\n                const sql = `INSERT INTO \"${this.table}\" (${quotedKeys}) VALUES (${placeholders}) RETURNING *`;\n                console.log(\"[DB-LOCAL] Insert:\", sql);\n                const result = await query(sql, values);\n                results.push(result.rows[0]);\n            }\n            // Return a chainable object that mimics Supabase behavior\n            const insertResult = {\n                data: results,\n                error: null\n            };\n            return {\n                ...insertResult,\n                select: ()=>({\n                        single: ()=>Promise.resolve({\n                                data: results[0],\n                                error: null\n                            }),\n                        then: (resolve)=>resolve({\n                                data: results,\n                                error: null\n                            })\n                    }),\n                then: (resolve)=>resolve(insertResult)\n            };\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Insert failed:\", error.message);\n            const errorResult = {\n                data: null,\n                error\n            };\n            return {\n                ...errorResult,\n                select: ()=>({\n                        single: ()=>Promise.resolve(errorResult),\n                        then: (resolve)=>resolve(errorResult)\n                    }),\n                then: (resolve)=>resolve(errorResult)\n            };\n        }\n    }\n    // Store update data for later execution\n    update(data) {\n        this._updateData = data;\n        this._operation = \"update\";\n        return this;\n    }\n    // Execute UPDATE query\n    async _executeUpdate() {\n        try {\n            const keys = Object.keys(this._updateData);\n            const values = Object.values(this._updateData);\n            const setClause = keys.map((k, i)=>`\"${k}\" = $${i + 1}`).join(\", \");\n            let sql = `UPDATE \"${this.table}\" SET ${setClause}`;\n            const params = [\n                ...values\n            ];\n            if (this._where.length > 0) {\n                // Adjust parameter indices for where clause\n                const whereWithOffset = this._where.map((w)=>{\n                    return w.replace(/\\$(\\d+)/g, (match, num)=>`$${parseInt(num) + values.length}`);\n                });\n                sql += ` WHERE ${whereWithOffset.join(\" AND \")}`;\n                params.push(...this._whereParams);\n            }\n            sql += \" RETURNING *\";\n            console.log(\"[DB-LOCAL] Update:\", sql, \"params:\", params);\n            const result = await query(sql, params);\n            return {\n                data: result.rows,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Update failed:\", error.message);\n            return {\n                data: null,\n                error\n            };\n        }\n    }\n    // Execute DELETE query\n    async _executeDelete() {\n        try {\n            let sql = `DELETE FROM \"${this.table}\"`;\n            if (this._where.length > 0) {\n                sql += ` WHERE ${this._where.join(\" AND \")}`;\n            }\n            sql += \" RETURNING *\";\n            console.log(\"[DB-LOCAL] Delete:\", sql);\n            const result = await query(sql, this._whereParams);\n            return {\n                data: result.rows,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Delete failed:\", error.message);\n            return {\n                data: null,\n                error\n            };\n        }\n    }\n    // Mark as delete operation\n    delete() {\n        this._operation = \"delete\";\n        return this;\n    }\n    // Execute SELECT query (and UPDATE/DELETE if flagged)\n    async then(resolve, reject) {\n        try {\n            // Handle update operation\n            if (this._operation === \"update\") {\n                const result = await this._executeUpdate();\n                resolve(result);\n                return;\n            }\n            // Handle delete operation\n            if (this._operation === \"delete\") {\n                const result = await this._executeDelete();\n                resolve(result);\n                return;\n            }\n            // Default: SELECT\n            let sql = `SELECT ${this._select} FROM \"${this.table}\"`;\n            if (this._where.length > 0) {\n                sql += ` WHERE ${this._where.join(\" AND \")}`;\n            }\n            if (this._order) {\n                sql += ` ORDER BY ${this._order}`;\n            }\n            if (this._limit) {\n                sql += ` LIMIT ${this._limit}`;\n            }\n            console.log(\"[DB-LOCAL] Executing:\", sql, \"with params:\", this._whereParams);\n            const result = await query(sql, this._whereParams);\n            if (this._single) {\n                resolve({\n                    data: result.rows[0] || null,\n                    error: null\n                });\n            } else {\n                resolve({\n                    data: result.rows,\n                    error: null\n                });\n            }\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Query failed:\", error.message);\n            if (reject) {\n                reject(error);\n            } else {\n                resolve({\n                    data: null,\n                    error\n                });\n            }\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    query,\n    getPool,\n    createLocalClient\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRTtnQkFDZmtDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDbEMsTUFBTSxDQUFDLENBQUM7WUFDbkM7WUFFQSxJQUFJLElBQUksQ0FBQ0UsTUFBTSxFQUFFO2dCQUNmZ0MsT0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUNoQyxNQUFNLENBQUMsQ0FBQztZQUNoQztZQUVBakMsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QmdFLEtBQUssZ0JBQWdCLElBQUksQ0FBQ25DLFlBQVk7WUFDM0UsTUFBTXBCLFNBQVMsTUFBTUgsTUFBTTBELEtBQUssSUFBSSxDQUFDbkMsWUFBWTtZQUVqRCxJQUFJLElBQUksQ0FBQ0UsT0FBTyxFQUFFO2dCQUNoQitCLFFBQVE7b0JBQUU5QyxNQUFNUCxPQUFPd0QsSUFBSSxDQUFDLEVBQUUsSUFBSTtvQkFBTTdELE9BQU87Z0JBQUs7WUFDdEQsT0FBTztnQkFDTDBELFFBQVE7b0JBQUU5QyxNQUFNUCxPQUFPd0QsSUFBSTtvQkFBRTdELE9BQU87Z0JBQUs7WUFDM0M7UUFDRixFQUFFLE9BQU9BLE9BQU87WUFDZEwsUUFBUUssS0FBSyxDQUFDLDRCQUE0QkEsTUFBTUMsT0FBTztZQUN2RCxJQUFJMEQsUUFBUTtnQkFDVkEsT0FBTzNEO1lBQ1QsT0FBTztnQkFDTDBELFFBQVE7b0JBQUU5QyxNQUFNO29CQUFNWjtnQkFBTTtZQUM5QjtRQUNGO0lBQ0Y7QUFFRjtBQUVBLGlFQUFlO0lBQUVFO0lBQU9aO0lBQVNnQjtBQUFrQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXN3ZWFsbGFyZS1hZG1pbi8uL2xpYi9kYi1sb2NhbC5qcz82MTM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIExvY2FsIFBvc3RncmVTUUwgRGF0YWJhc2UgQ2xpZW50XG4vLyBVc2VkIHdoZW4gTE9DQUxfTU9ERT10cnVlXG5cbmltcG9ydCB7IFBvb2wgfSBmcm9tICdwZydcblxubGV0IHBvb2wgPSBudWxsXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb29sKCkge1xuICBpZiAoIXBvb2wpIHtcbiAgICBjb25zdCBjb25uZWN0aW9uU3RyaW5nID0gcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8ICdwb3N0Z3Jlc3FsOi8vcG9zdGdyZXM6cG9zdGdyZXNAbG9jYWxob3N0OjU0MzIvYXN3ZWFsbGFyZSdcbiAgICBjb25zb2xlLmxvZygnW0RCLUxPQ0FMXSBDcmVhdGluZyBwb29sIHdpdGg6JywgY29ubmVjdGlvblN0cmluZy5yZXBsYWNlKC86W146QF0rQC8sICc6KioqQCcpKVxuICAgIHBvb2wgPSBuZXcgUG9vbCh7IGNvbm5lY3Rpb25TdHJpbmcgfSlcbiAgICBcbiAgICBwb29sLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEQi1MT0NBTF0gUG9vbCBlcnJvcjonLCBlcnIubWVzc2FnZSlcbiAgICB9KVxuICB9XG4gIHJldHVybiBwb29sXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeSh0ZXh0LCBwYXJhbXMpIHtcbiAgY29uc3QgcG9vbCA9IGdldFBvb2woKVxuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkodGV4dCwgcGFyYW1zKVxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREItTE9DQUxdIFF1ZXJ5IGVycm9yOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBRdWVyeSB3YXM6JywgdGV4dClcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIEhlbHBlciB0byBtaW1pYyBTdXBhYmFzZSByZXNwb25zZSBmb3JtYXRcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMb2NhbENsaWVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBmcm9tOiAodGFibGUpID0+IG5ldyBRdWVyeUJ1aWxkZXIodGFibGUpLFxuICAgIGF1dGg6IHtcbiAgICAgIGdldFVzZXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gSW4gbG9jYWwgbW9kZSwgcmV0dXJuIGEgbW9jayBhZG1pbiB1c2VyXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBpZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMScsXG4gICAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AbG9jYWwuZGV2J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGdldFNlc3Npb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBpZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMScsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdhZG1pbkBsb2NhbC5kZXYnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzaWduT3V0OiBhc3luYyAoKSA9PiAoeyBlcnJvcjogbnVsbCB9KSxcbiAgICAgIG9uQXV0aFN0YXRlQ2hhbmdlOiAoKSA9PiAoeyBkYXRhOiB7IHN1YnNjcmlwdGlvbjogeyB1bnN1YnNjcmliZTogKCkgPT4ge30gfSB9IH0pXG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFF1ZXJ5QnVpbGRlciB7XG4gIGNvbnN0cnVjdG9yKHRhYmxlKSB7XG4gICAgdGhpcy50YWJsZSA9IHRhYmxlXG4gICAgdGhpcy5fc2VsZWN0ID0gJyonXG4gICAgdGhpcy5fd2hlcmUgPSBbXVxuICAgIHRoaXMuX3doZXJlUGFyYW1zID0gW11cbiAgICB0aGlzLl9vcmRlciA9IG51bGxcbiAgICB0aGlzLl9zaW5nbGUgPSBmYWxzZVxuICAgIHRoaXMuX2xpbWl0ID0gbnVsbFxuICAgIHRoaXMuX3JldHVybkRhdGEgPSB0cnVlXG4gICAgdGhpcy5fb3BlcmF0aW9uID0gbnVsbCAvLyAndXBkYXRlJywgJ2RlbGV0ZScsIG9yIG51bGwgZm9yIHNlbGVjdFxuICAgIHRoaXMuX3VwZGF0ZURhdGEgPSBudWxsXG4gIH1cblxuICBzZWxlY3QoY29sdW1ucyA9ICcqJykge1xuICAgIC8vIEhhbmRsZSBTdXBhYmFzZS1zdHlsZSBuZXN0ZWQgc2VsZWN0cyBieSBzdHJpcHBpbmcgdGhlbVxuICAgIC8vIGUuZy4sICcqLCBwaWxlcyhzbHVnLCBuYW1lKScgYmVjb21lcyAnKidcbiAgICBpZiAoY29sdW1ucy5pbmNsdWRlcygnKCcpKSB7XG4gICAgICB0aGlzLl9zZWxlY3QgPSBjb2x1bW5zLnNwbGl0KCcsJykuZmlsdGVyKGMgPT4gIWMuaW5jbHVkZXMoJygnKSkubWFwKGMgPT4gYy50cmltKCkpLmpvaW4oJywgJykgfHwgJyonXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NlbGVjdCA9IGNvbHVtbnNcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGVxKGNvbHVtbiwgdmFsdWUpIHtcbiAgICB0aGlzLl93aGVyZVBhcmFtcy5wdXNoKHZhbHVlKVxuICAgIHRoaXMuX3doZXJlLnB1c2goYFwiJHtjb2x1bW59XCIgPSAkJHt0aGlzLl93aGVyZVBhcmFtcy5sZW5ndGh9YClcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgbmVxKGNvbHVtbiwgdmFsdWUpIHtcbiAgICB0aGlzLl93aGVyZVBhcmFtcy5wdXNoKHZhbHVlKVxuICAgIHRoaXMuX3doZXJlLnB1c2goYFwiJHtjb2x1bW59XCIgIT0gJCR7dGhpcy5fd2hlcmVQYXJhbXMubGVuZ3RofWApXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGluKGNvbHVtbiwgdmFsdWVzKSB7XG4gICAgaWYgKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXJzID0gdmFsdWVzLm1hcCgoXywgaSkgPT4gYCQke3RoaXMuX3doZXJlUGFyYW1zLmxlbmd0aCArIGkgKyAxfWApLmpvaW4oJywgJylcbiAgICAgIHRoaXMuX3doZXJlUGFyYW1zLnB1c2goLi4udmFsdWVzKVxuICAgICAgdGhpcy5fd2hlcmUucHVzaChgXCIke2NvbHVtbn1cIiBJTiAoJHtwbGFjZWhvbGRlcnN9KWApXG4gICAgfVxuICAgIC8vIElmIGVtcHR5IGFycmF5LCBkb24ndCBhZGQgYW55IGNvbmRpdGlvbiAod2lsbCByZXR1cm4gYWxsIG9yIGJlIGZpbHRlcmVkIGJ5IG90aGVyIGNvbmRpdGlvbnMpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIG9yZGVyKGNvbHVtbiwgeyBhc2NlbmRpbmcgPSB0cnVlIH0gPSB7fSkge1xuICAgIHRoaXMuX29yZGVyID0gYFwiJHtjb2x1bW59XCIgJHthc2NlbmRpbmcgPyAnQVNDJyA6ICdERVNDJ31gXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGxpbWl0KGNvdW50KSB7XG4gICAgdGhpcy5fbGltaXQgPSBjb3VudFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzaW5nbGUoKSB7XG4gICAgdGhpcy5fc2luZ2xlID0gdHJ1ZVxuICAgIHRoaXMuX2xpbWl0ID0gMVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBFeGVjdXRlIFNFTEVDVCBxdWVyeVxuICBhc3luYyB0aGVuKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgc3FsID0gYFNFTEVDVCAke3RoaXMuX3NlbGVjdH0gRlJPTSBcIiR7dGhpcy50YWJsZX1cImBcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3doZXJlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3FsICs9IGAgV0hFUkUgJHt0aGlzLl93aGVyZS5qb2luKCcgQU5EICcpfWBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX29yZGVyKSB7XG4gICAgICAgIHNxbCArPSBgIE9SREVSIEJZICR7dGhpcy5fb3JkZXJ9YFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodGhpcy5fbGltaXQpIHtcbiAgICAgICAgc3FsICs9IGAgTElNSVQgJHt0aGlzLl9saW1pdH1gXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbREItTE9DQUxdIEV4ZWN1dGluZzonLCBzcWwsICd3aXRoIHBhcmFtczonLCB0aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHNxbCwgdGhpcy5fd2hlcmVQYXJhbXMpXG4gICAgICBcbiAgICAgIGlmICh0aGlzLl9zaW5nbGUpIHtcbiAgICAgICAgcmVzb2x2ZSh7IGRhdGE6IHJlc3VsdC5yb3dzWzBdIHx8IG51bGwsIGVycm9yOiBudWxsIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHsgZGF0YTogcmVzdWx0LnJvd3MsIGVycm9yOiBudWxsIH0pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEQi1MT0NBTF0gUXVlcnkgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICBpZiAocmVqZWN0KSB7XG4gICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoeyBkYXRhOiBudWxsLCBlcnJvciB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluc2VydChkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEhhbmRsZSBhcnJheSBvZiBvYmplY3RzXG4gICAgICBjb25zdCByZWNvcmRzID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV1cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiByZWNvcmRzKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhyZWNvcmQpXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC52YWx1ZXMocmVjb3JkKVxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSB2YWx1ZXMubWFwKChfLCBpKSA9PiBgJCR7aSArIDF9YCkuam9pbignLCAnKVxuICAgICAgICBjb25zdCBxdW90ZWRLZXlzID0ga2V5cy5tYXAoayA9PiBgXCIke2t9XCJgKS5qb2luKCcsICcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzcWwgPSBgSU5TRVJUIElOVE8gXCIke3RoaXMudGFibGV9XCIgKCR7cXVvdGVkS2V5c30pIFZBTFVFUyAoJHtwbGFjZWhvbGRlcnN9KSBSRVRVUk5JTkcgKmBcbiAgICAgICAgY29uc29sZS5sb2coJ1tEQi1MT0NBTF0gSW5zZXJ0OicsIHNxbClcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCB2YWx1ZXMpXG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQucm93c1swXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGEgY2hhaW5hYmxlIG9iamVjdCB0aGF0IG1pbWljcyBTdXBhYmFzZSBiZWhhdmlvclxuICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0ID0geyBkYXRhOiByZXN1bHRzLCBlcnJvcjogbnVsbCB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5pbnNlcnRSZXN1bHQsXG4gICAgICAgIHNlbGVjdDogKCkgPT4gKHtcbiAgICAgICAgICBzaW5nbGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGRhdGE6IHJlc3VsdHNbMF0sIGVycm9yOiBudWxsIH0pLFxuICAgICAgICAgIHRoZW46IChyZXNvbHZlKSA9PiByZXNvbHZlKHsgZGF0YTogcmVzdWx0cywgZXJyb3I6IG51bGwgfSlcbiAgICAgICAgfSksXG4gICAgICAgIHRoZW46IChyZXNvbHZlKSA9PiByZXNvbHZlKGluc2VydFJlc3VsdClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBJbnNlcnQgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICBjb25zdCBlcnJvclJlc3VsdCA9IHsgZGF0YTogbnVsbCwgZXJyb3IgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXJyb3JSZXN1bHQsXG4gICAgICAgIHNlbGVjdDogKCkgPT4gKHtcbiAgICAgICAgICBzaW5nbGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShlcnJvclJlc3VsdCksXG4gICAgICAgICAgdGhlbjogKHJlc29sdmUpID0+IHJlc29sdmUoZXJyb3JSZXN1bHQpXG4gICAgICAgIH0pLFxuICAgICAgICB0aGVuOiAocmVzb2x2ZSkgPT4gcmVzb2x2ZShlcnJvclJlc3VsdClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBTdG9yZSB1cGRhdGUgZGF0YSBmb3IgbGF0ZXIgZXhlY3V0aW9uXG4gIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5fdXBkYXRlRGF0YSA9IGRhdGFcbiAgICB0aGlzLl9vcGVyYXRpb24gPSAndXBkYXRlJ1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBFeGVjdXRlIFVQREFURSBxdWVyeVxuICBhc3luYyBfZXhlY3V0ZVVwZGF0ZSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX3VwZGF0ZURhdGEpXG4gICAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuX3VwZGF0ZURhdGEpXG4gICAgICBjb25zdCBzZXRDbGF1c2UgPSBrZXlzLm1hcCgoaywgaSkgPT4gYFwiJHtrfVwiID0gJCR7aSArIDF9YCkuam9pbignLCAnKVxuICAgICAgXG4gICAgICBsZXQgc3FsID0gYFVQREFURSBcIiR7dGhpcy50YWJsZX1cIiBTRVQgJHtzZXRDbGF1c2V9YFxuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLnZhbHVlc11cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3doZXJlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gQWRqdXN0IHBhcmFtZXRlciBpbmRpY2VzIGZvciB3aGVyZSBjbGF1c2VcbiAgICAgICAgY29uc3Qgd2hlcmVXaXRoT2Zmc2V0ID0gdGhpcy5fd2hlcmUubWFwKHcgPT4ge1xuICAgICAgICAgIHJldHVybiB3LnJlcGxhY2UoL1xcJChcXGQrKS9nLCAobWF0Y2gsIG51bSkgPT4gYCQke3BhcnNlSW50KG51bSkgKyB2YWx1ZXMubGVuZ3RofWApXG4gICAgICAgIH0pXG4gICAgICAgIHNxbCArPSBgIFdIRVJFICR7d2hlcmVXaXRoT2Zmc2V0LmpvaW4oJyBBTkQgJyl9YFxuICAgICAgICBwYXJhbXMucHVzaCguLi50aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3FsICs9ICcgUkVUVVJOSU5HIConXG4gICAgICBjb25zb2xlLmxvZygnW0RCLUxPQ0FMXSBVcGRhdGU6Jywgc3FsLCAncGFyYW1zOicsIHBhcmFtcylcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHNxbCwgcGFyYW1zKVxuICAgICAgXG4gICAgICByZXR1cm4geyBkYXRhOiByZXN1bHQucm93cywgZXJyb3I6IG51bGwgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbREItTE9DQUxdIFVwZGF0ZSBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSlcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgICB9XG4gIH1cblxuICAvLyBFeGVjdXRlIERFTEVURSBxdWVyeVxuICBhc3luYyBfZXhlY3V0ZURlbGV0ZSgpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHNxbCA9IGBERUxFVEUgRlJPTSBcIiR7dGhpcy50YWJsZX1cImBcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3doZXJlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3FsICs9IGAgV0hFUkUgJHt0aGlzLl93aGVyZS5qb2luKCcgQU5EICcpfWBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3FsICs9ICcgUkVUVVJOSU5HIConXG4gICAgICBjb25zb2xlLmxvZygnW0RCLUxPQ0FMXSBEZWxldGU6Jywgc3FsKVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCB0aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgZGF0YTogcmVzdWx0LnJvd3MsIGVycm9yOiBudWxsIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBEZWxldGUgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9XG4gICAgfVxuICB9XG5cbiAgLy8gTWFyayBhcyBkZWxldGUgb3BlcmF0aW9uXG4gIGRlbGV0ZSgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSAnZGVsZXRlJ1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBFeGVjdXRlIFNFTEVDVCBxdWVyeSAoYW5kIFVQREFURS9ERUxFVEUgaWYgZmxhZ2dlZClcbiAgYXN5bmMgdGhlbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB0cnkge1xuICAgICAgLy8gSGFuZGxlIHVwZGF0ZSBvcGVyYXRpb25cbiAgICAgIGlmICh0aGlzLl9vcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2V4ZWN1dGVVcGRhdGUoKVxuICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBkZWxldGUgb3BlcmF0aW9uXG4gICAgICBpZiAodGhpcy5fb3BlcmF0aW9uID09PSAnZGVsZXRlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9leGVjdXRlRGVsZXRlKClcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEZWZhdWx0OiBTRUxFQ1RcbiAgICAgIGxldCBzcWwgPSBgU0VMRUNUICR7dGhpcy5fc2VsZWN0fSBGUk9NIFwiJHt0aGlzLnRhYmxlfVwiYFxuICAgICAgXG4gICAgICBpZiAodGhpcy5fd2hlcmUubGVuZ3RoID4gMCkge1xuICAgICAgICBzcWwgKz0gYCBXSEVSRSAke3RoaXMuX3doZXJlLmpvaW4oJyBBTkQgJyl9YFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodGhpcy5fb3JkZXIpIHtcbiAgICAgICAgc3FsICs9IGAgT1JERVIgQlkgJHt0aGlzLl9vcmRlcn1gXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0aGlzLl9saW1pdCkge1xuICAgICAgICBzcWwgKz0gYCBMSU1JVCAke3RoaXMuX2xpbWl0fWBcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ1tEQi1MT0NBTF0gRXhlY3V0aW5nOicsIHNxbCwgJ3dpdGggcGFyYW1zOicsIHRoaXMuX3doZXJlUGFyYW1zKVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCB0aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3NpbmdsZSkge1xuICAgICAgICByZXNvbHZlKHsgZGF0YTogcmVzdWx0LnJvd3NbMF0gfHwgbnVsbCwgZXJyb3I6IG51bGwgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoeyBkYXRhOiByZXN1bHQucm93cywgZXJyb3I6IG51bGwgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBRdWVyeSBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSlcbiAgICAgIGlmIChyZWplY3QpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSh7IGRhdGE6IG51bGwsIGVycm9yIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBxdWVyeSwgZ2V0UG9vbCwgY3JlYXRlTG9jYWxDbGllbnQgfSJdLCJuYW1lcyI6WyJQb29sIiwicG9vbCIsImdldFBvb2wiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImNvbnNvbGUiLCJsb2ciLCJyZXBsYWNlIiwib24iLCJlcnIiLCJlcnJvciIsIm1lc3NhZ2UiLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJyZXN1bHQiLCJjcmVhdGVMb2NhbENsaWVudCIsImZyb20iLCJ0YWJsZSIsIlF1ZXJ5QnVpbGRlciIsImF1dGgiLCJnZXRVc2VyIiwiZGF0YSIsInVzZXIiLCJpZCIsImVtYWlsIiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iLCJzaWduT3V0Iiwib25BdXRoU3RhdGVDaGFuZ2UiLCJzdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsImNvbnN0cnVjdG9yIiwiX3NlbGVjdCIsIl93aGVyZSIsIl93aGVyZVBhcmFtcyIsIl9vcmRlciIsIl9zaW5nbGUiLCJfbGltaXQiLCJfcmV0dXJuRGF0YSIsIl9vcGVyYXRpb24iLCJfdXBkYXRlRGF0YSIsInNlbGVjdCIsImNvbHVtbnMiLCJpbmNsdWRlcyIsInNwbGl0IiwiZmlsdGVyIiwiYyIsIm1hcCIsInRyaW0iLCJqb2luIiwiZXEiLCJjb2x1bW4iLCJ2YWx1ZSIsInB1c2giLCJsZW5ndGgiLCJuZXEiLCJpbiIsInZhbHVlcyIsInBsYWNlaG9sZGVycyIsIl8iLCJpIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsaW1pdCIsImNvdW50Iiwic2luZ2xlIiwidGhlbiIsInJlc29sdmUiLCJyZWplY3QiLCJzcWwiLCJyb3dzIiwiaW5zZXJ0IiwicmVjb3JkcyIsIkFycmF5IiwiaXNBcnJheSIsInJlc3VsdHMiLCJyZWNvcmQiLCJrZXlzIiwiT2JqZWN0IiwicXVvdGVkS2V5cyIsImsiLCJpbnNlcnRSZXN1bHQiLCJQcm9taXNlIiwiZXJyb3JSZXN1bHQiLCJ1cGRhdGUiLCJfZXhlY3V0ZVVwZGF0ZSIsInNldENsYXVzZSIsIndoZXJlV2l0aE9mZnNldCIsInciLCJtYXRjaCIsIm51bSIsInBhcnNlSW50IiwiX2V4ZWN1dGVEZWxldGUiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db-local.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.js":
/*!********************************!*\
  !*** ./lib/supabase-server.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseServer: () => (/* binding */ createSupabaseServer)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _db_local__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db-local */ \"(rsc)/./lib/db-local.js\");\n\n\n\nfunction createSupabaseServer() {\n    // Check if running in local mode\n    if (process.env.LOCAL_MODE === \"true\") {\n        return (0,_db_local__WEBPACK_IMPORTED_MODULE_2__.createLocalClient)();\n    }\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://pwdwemakaozxmutwswqa.supabase.co\", \"sb_publishable_K-L2v83yXtTeHkSWtFX_ag_ZbjbDq8p\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n                } catch  {\n                // Server component, ignore\n                }\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0Q7QUFDWjtBQUNRO0FBRXZDLFNBQVNHO0lBQ2QsaUNBQWlDO0lBQ2pDLElBQUlDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxLQUFLLFFBQVE7UUFDckMsT0FBT0osNERBQWlCQTtJQUMxQjtJQUVBLE1BQU1LLGNBQWNOLHFEQUFPQTtJQUUzQixPQUFPRCxpRUFBa0JBLENBQ3ZCSSwwQ0FBb0MsRUFDcENBLGdEQUF5QyxFQUN6QztRQUNFSCxTQUFTO1lBQ1BTO2dCQUNFLE9BQU9ILFlBQVlHLE1BQU07WUFDM0I7WUFDQUMsUUFBT0MsWUFBWTtnQkFDakIsSUFBSTtvQkFDRkEsYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUM1Q1QsWUFBWVUsR0FBRyxDQUFDSCxNQUFNQyxPQUFPQztnQkFFakMsRUFBRSxPQUFNO2dCQUNOLDJCQUEyQjtnQkFDN0I7WUFDRjtRQUNGO0lBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fzd2VhbGxhcmUtYWRtaW4vLi9saWIvc3VwYWJhc2Utc2VydmVyLmpzP2RiYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3NzcidcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnXG5pbXBvcnQgeyBjcmVhdGVMb2NhbENsaWVudCB9IGZyb20gJy4vZGItbG9jYWwnXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdXBhYmFzZVNlcnZlcigpIHtcbiAgLy8gQ2hlY2sgaWYgcnVubmluZyBpbiBsb2NhbCBtb2RlXG4gIGlmIChwcm9jZXNzLmVudi5MT0NBTF9NT0RFID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gY3JlYXRlTG9jYWxDbGllbnQoKVxuICB9XG5cbiAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKClcbiAgXG4gIHJldHVybiBjcmVhdGVTZXJ2ZXJDbGllbnQoXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0QWxsKCkge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXRBbGwoKVxuICAgICAgICB9LFxuICAgICAgICBzZXRBbGwoY29va2llc1RvU2V0KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+XG4gICAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIFNlcnZlciBjb21wb25lbnQsIGlnbm9yZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfVxuICApXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ2xpZW50IiwiY29va2llcyIsImNyZWF0ZUxvY2FsQ2xpZW50IiwiY3JlYXRlU3VwYWJhc2VTZXJ2ZXIiLCJwcm9jZXNzIiwiZW52IiwiTE9DQUxfTU9ERSIsImNvb2tpZVN0b3JlIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/cookie","vendor-chunks/adm-zip"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();