"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/mockups/route";
exports.ids = ["app/api/admin/mockups/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_apps_admin_app_api_admin_mockups_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/mockups/route.js */ \"(rsc)/./app/api/admin/mockups/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/mockups/route\",\n        pathname: \"/api/admin/mockups\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/mockups/route\"\n    },\n    resolvedPagePath: \"/app/apps/admin/app/api/admin/mockups/route.js\",\n    nextConfigOutput,\n    userland: _app_apps_admin_app_api_admin_mockups_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/mockups/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRm1vY2t1cHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGbW9ja3VwcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFkbWluJTJGbW9ja3VwcyUyRnJvdXRlLmpzJmFwcERpcj0lMkZhcHAlMkZhcHBzJTJGYWRtaW4lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCUyRmFwcHMlMkZhZG1pbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0Y7QUFDM0U7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3dlYWxsYXJlLWFkbWluLz9lYzIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9hcHAvYXBwcy9hZG1pbi9hcHAvYXBpL2FkbWluL21vY2t1cHMvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9tb2NrdXBzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vbW9ja3Vwc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vbW9ja3Vwcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9hcHAvYXBwcy9hZG1pbi9hcHAvYXBpL2FkbWluL21vY2t1cHMvcm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL21vY2t1cHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/admin/mockups/route.js":
/*!****************************************!*\
  !*** ./app/api/admin/mockups/route.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/supabase-server */ \"(rsc)/./lib/supabase-server.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var adm_zip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! adm-zip */ \"(rsc)/./node_modules/adm-zip/adm-zip.js\");\n/* harmony import */ var adm_zip__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(adm_zip__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\nconst BUCKET_NAME = \"assets\";\n// Helper to get authenticated user and check admin status\nasync function getAuthenticatedUserAndCheckAdmin() {\n    if (process.env.LOCAL_MODE === \"true\") {\n        const { cookies } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\"));\n        const { getUserFromToken } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/semver\"), __webpack_require__.e(\"vendor-chunks/jsonwebtoken\"), __webpack_require__.e(\"vendor-chunks/jws\"), __webpack_require__.e(\"vendor-chunks/ecdsa-sig-formatter\"), __webpack_require__.e(\"vendor-chunks/bcryptjs\"), __webpack_require__.e(\"vendor-chunks/safe-buffer\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/lodash.once\"), __webpack_require__.e(\"vendor-chunks/lodash.isstring\"), __webpack_require__.e(\"vendor-chunks/lodash.isplainobject\"), __webpack_require__.e(\"vendor-chunks/lodash.isnumber\"), __webpack_require__.e(\"vendor-chunks/lodash.isinteger\"), __webpack_require__.e(\"vendor-chunks/lodash.isboolean\"), __webpack_require__.e(\"vendor-chunks/lodash.includes\"), __webpack_require__.e(\"vendor-chunks/jwa\"), __webpack_require__.e(\"vendor-chunks/buffer-equal-constant-time\"), __webpack_require__.e(\"_rsc_lib_auth-local_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../lib/auth-local */ \"(rsc)/./lib/auth-local.js\"));\n        const cookieStore = cookies();\n        const token = cookieStore.get(\"auth-token\")?.value;\n        if (token) {\n            const user = await getUserFromToken(token);\n            if (user) {\n                return {\n                    user,\n                    isAdmin: true,\n                    error: null\n                };\n            }\n        }\n        return {\n            user: null,\n            isAdmin: false,\n            error: \"Not authenticated\"\n        };\n    }\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    const { data: { user }, error } = await supabase.auth.getUser();\n    if (error || !user) {\n        return {\n            user: null,\n            isAdmin: false,\n            error: error?.message || \"Not authenticated\"\n        };\n    }\n    try {\n        const supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_5__.createClient)(\"https://pwdwemakaozxmutwswqa.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\n        const { data: config } = await supabaseAdmin.from(\"app_config\").select(\"admin_emails\").single();\n        const adminEmails = config?.admin_emails || [];\n        const isAdmin = adminEmails.includes(user.email);\n        return {\n            user,\n            isAdmin,\n            error: null\n        };\n    } catch (dbError) {\n        console.error(\"[MOCKUPS] Error checking admin status:\", dbError);\n        return {\n            user,\n            isAdmin: false,\n            error: null\n        };\n    }\n}\nfunction getSupabaseAdmin() {\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_5__.createClient)(\"https://pwdwemakaozxmutwswqa.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\n}\n// GET - Fetch mockup images for a box\nasync function GET(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    try {\n        const { user, isAdmin, error: authError } = await getAuthenticatedUserAndCheckAdmin();\n        if (authError || !user || !isAdmin) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const boxId = searchParams.get(\"boxId\");\n        if (!boxId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"boxId required\"\n            }, {\n                status: 400\n            });\n        }\n        const { data: mockups, error } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId).order(\"display_order\", {\n            ascending: true\n        }).order(\"created_at\", {\n            ascending: true\n        });\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        const mainImage = mockups?.find((m)=>m.image_type === \"BOX_MAIN\") || null;\n        const secondaryImage = mockups?.find((m)=>m.image_type === \"BOX_SECONDARY\") || null;\n        const cardMockups = (mockups || []).filter((m)=>m.image_type === \"CARD\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            boxId,\n            mainImage,\n            secondaryImage,\n            cardMockups,\n            totalCount: mockups?.length || 0\n        });\n    } catch (error) {\n        console.error(\"[MOCKUPS GET] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// POST - Upload mockup image(s)\nasync function POST(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    const supabaseAdmin = getSupabaseAdmin();\n    try {\n        const { user, isAdmin, error: authError } = await getAuthenticatedUserAndCheckAdmin();\n        if (authError || !user || !isAdmin) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const boxId = formData.get(\"boxId\");\n        const imageType = formData.get(\"imageType\");\n        if (!file || !boxId || !imageType) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields: file, boxId, imageType\"\n            }, {\n                status: 400\n            });\n        }\n        const validTypes = [\n            \"BOX_MAIN\",\n            \"BOX_SECONDARY\",\n            \"CARD_ZIP\"\n        ];\n        if (!validTypes.includes(imageType)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Invalid imageType. Must be one of: ${validTypes.join(\", \")}`\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"[MOCKUPS POST] Processing:\", {\n            boxId,\n            imageType,\n            fileName: file.name\n        });\n        if (imageType === \"CARD_ZIP\") {\n            return handleCardMockupsZip(supabase, supabaseAdmin, file, boxId);\n        }\n        return handleSingleImageUpload(supabase, supabaseAdmin, file, boxId, imageType);\n    } catch (error) {\n        console.error(\"[MOCKUPS POST] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE - Delete mockup image(s)\nasync function DELETE(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    const supabaseAdmin = getSupabaseAdmin();\n    try {\n        const { user, isAdmin, error: authError } = await getAuthenticatedUserAndCheckAdmin();\n        if (authError || !user || !isAdmin) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const boxId = searchParams.get(\"boxId\");\n        const imageId = searchParams.get(\"imageId\");\n        const deleteType = searchParams.get(\"type\");\n        if (!boxId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"boxId required\"\n            }, {\n                status: 400\n            });\n        }\n        let deletedCount = 0;\n        if (imageId) {\n            const { data: image } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"id\", imageId).eq(\"box_id\", boxId).single();\n            if (image) {\n                await deleteStorageFile(supabaseAdmin, image.image_path);\n                await supabase.from(\"mockup_images\").delete().eq(\"id\", imageId);\n                deletedCount = 1;\n            }\n        } else if (deleteType === \"all\") {\n            deletedCount = await deleteAllMockupsForBox(supabase, supabaseAdmin, boxId);\n        } else if (deleteType === \"main\") {\n            deletedCount = await deleteMockupsByType(supabase, supabaseAdmin, boxId, \"BOX_MAIN\");\n        } else if (deleteType === \"secondary\") {\n            deletedCount = await deleteMockupsByType(supabase, supabaseAdmin, boxId, \"BOX_SECONDARY\");\n        } else if (deleteType === \"cards\") {\n            deletedCount = await deleteMockupsByType(supabase, supabaseAdmin, boxId, \"CARD\");\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Specify imageId or type (all, main, secondary, cards)\"\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            deleted: deletedCount\n        });\n    } catch (error) {\n        console.error(\"[MOCKUPS DELETE] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT - Update mockup image (display_order)\nasync function PUT(request) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createSupabaseServer)();\n    try {\n        const { user, isAdmin, error: authError } = await getAuthenticatedUserAndCheckAdmin();\n        if (authError || !user || !isAdmin) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { id, displayOrder } = body;\n        if (!id || displayOrder === undefined) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"id and displayOrder required\"\n            }, {\n                status: 400\n            });\n        }\n        const { error } = await supabase.from(\"mockup_images\").update({\n            display_order: parseInt(displayOrder)\n        }).eq(\"id\", id);\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"[MOCKUPS PUT] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper: Handle single image upload to Supabase Storage\nasync function handleSingleImageUpload(supabase, supabaseAdmin, file, boxId, imageType) {\n    const validExtensions = [\n        \".png\",\n        \".jpg\",\n        \".jpeg\",\n        \".webp\"\n    ];\n    const ext = path__WEBPACK_IMPORTED_MODULE_2___default().extname(file.name).toLowerCase();\n    if (!validExtensions.includes(ext)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid file type. Allowed: PNG, JPG, JPEG, WEBP\"\n        }, {\n            status: 400\n        });\n    }\n    const bytes = await file.arrayBuffer();\n    const buffer = Buffer.from(bytes);\n    const md5Hash = crypto__WEBPACK_IMPORTED_MODULE_3___default().createHash(\"md5\").update(buffer).digest(\"hex\");\n    const newFilename = `${md5Hash}${ext}`;\n    const storagePath = `boxes/${boxId}/mockups/${newFilename}`;\n    // Delete existing image of this type\n    const { data: existing } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    if (existing && existing.length > 0) {\n        for (const img of existing){\n            await deleteStorageFile(supabaseAdmin, img.image_path);\n        }\n        await supabase.from(\"mockup_images\").delete().eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    }\n    // Upload to Supabase Storage\n    const { error: uploadError } = await supabaseAdmin.storage.from(BUCKET_NAME).upload(storagePath, buffer, {\n        contentType: file.type || \"image/png\",\n        upsert: true\n    });\n    if (uploadError) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: uploadError.message\n        }, {\n            status: 500\n        });\n    }\n    const { data: { publicUrl } } = supabaseAdmin.storage.from(BUCKET_NAME).getPublicUrl(storagePath);\n    const newImageData = {\n        id: md5Hash,\n        box_id: boxId,\n        image_path: publicUrl,\n        image_type: imageType,\n        display_order: imageType === \"BOX_MAIN\" ? 1 : 2,\n        created_at: new Date().toISOString()\n    };\n    const { error } = await supabase.from(\"mockup_images\").insert(newImageData);\n    if (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n    console.log(\"[MOCKUPS] Created\", imageType, \"for box:\", boxId);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        image: newImageData,\n        message: `${imageType} image uploaded successfully`\n    });\n}\n// Helper: Handle ZIP upload for card mockups\nasync function handleCardMockupsZip(supabase, supabaseAdmin, zipFile, boxId) {\n    const bytes = await zipFile.arrayBuffer();\n    const buffer = Buffer.from(bytes);\n    const maxSize = 50 * 1024 * 1024;\n    if (buffer.length > maxSize) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"ZIP file too large. Maximum size is 50MB\"\n        }, {\n            status: 400\n        });\n    }\n    let zip;\n    try {\n        zip = new (adm_zip__WEBPACK_IMPORTED_MODULE_4___default())(buffer);\n    } catch (err) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid ZIP file format\"\n        }, {\n            status: 400\n        });\n    }\n    const zipEntries = zip.getEntries();\n    const imageEntries = zipEntries.filter((entry)=>{\n        const name = entry.entryName.toLowerCase();\n        if (entry.isDirectory) return false;\n        if (name.includes(\"__macosx\")) return false;\n        if (name.startsWith(\".\")) return false;\n        if (path__WEBPACK_IMPORTED_MODULE_2___default().basename(name).startsWith(\".\")) return false;\n        return /\\.(png|jpg|jpeg|webp)$/i.test(name);\n    });\n    if (imageEntries.length === 0) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"No valid images found in ZIP (PNG, JPG, JPEG, WEBP)\"\n        }, {\n            status: 400\n        });\n    }\n    if (imageEntries.length > 300) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: `Too many images (${imageEntries.length}). Maximum is 300`\n        }, {\n            status: 400\n        });\n    }\n    console.log(\"[MOCKUPS] Found\", imageEntries.length, \"images in ZIP for box:\", boxId);\n    // Delete existing card mockups\n    await deleteMockupsByType(supabase, supabaseAdmin, boxId, \"CARD\");\n    imageEntries.sort((a, b)=>{\n        const nameA = path__WEBPACK_IMPORTED_MODULE_2___default().basename(a.entryName).toLowerCase();\n        const nameB = path__WEBPACK_IMPORTED_MODULE_2___default().basename(b.entryName).toLowerCase();\n        return nameA.localeCompare(nameB, undefined, {\n            numeric: true,\n            sensitivity: \"base\"\n        });\n    });\n    const createdMockups = [];\n    const errors = [];\n    for(let i = 0; i < imageEntries.length; i++){\n        const entry = imageEntries[i];\n        const displayOrder = i + 1;\n        try {\n            const fileBuffer = entry.getData();\n            const md5Hash = crypto__WEBPACK_IMPORTED_MODULE_3___default().createHash(\"md5\").update(fileBuffer).digest(\"hex\");\n            const originalExt = path__WEBPACK_IMPORTED_MODULE_2___default().extname(entry.entryName).toLowerCase() || \".png\";\n            const newFilename = `${md5Hash}${originalExt}`;\n            const storagePath = `boxes/${boxId}/mockups/cards/${newFilename}`;\n            const { error: uploadError } = await supabaseAdmin.storage.from(BUCKET_NAME).upload(storagePath, fileBuffer, {\n                contentType: originalExt === \".png\" ? \"image/png\" : \"image/jpeg\",\n                upsert: true\n            });\n            if (uploadError) {\n                errors.push({\n                    file: entry.entryName,\n                    error: uploadError.message\n                });\n                continue;\n            }\n            const { data: { publicUrl } } = supabaseAdmin.storage.from(BUCKET_NAME).getPublicUrl(storagePath);\n            const { error: dbError } = await supabase.from(\"mockup_images\").insert({\n                id: `${boxId}_card_${md5Hash}`,\n                box_id: boxId,\n                image_path: publicUrl,\n                image_type: \"CARD\",\n                display_order: displayOrder,\n                created_at: new Date().toISOString()\n            });\n            if (dbError) {\n                errors.push({\n                    file: entry.entryName,\n                    error: dbError.message\n                });\n            } else {\n                createdMockups.push({\n                    id: `${boxId}_card_${md5Hash}`,\n                    originalFile: path__WEBPACK_IMPORTED_MODULE_2___default().basename(entry.entryName),\n                    imagePath: publicUrl,\n                    displayOrder: displayOrder\n                });\n            }\n        } catch (err) {\n            errors.push({\n                file: entry.entryName,\n                error: err.message\n            });\n        }\n    }\n    console.log(\"[MOCKUPS] Created\", createdMockups.length, \"card mockups for box:\", boxId);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        message: `Uploaded ${createdMockups.length} card mockup images`,\n        created: createdMockups.length,\n        mockups: createdMockups,\n        errors: errors.length > 0 ? errors : undefined\n    });\n}\n// Helper: Delete mockups by type\nasync function deleteMockupsByType(supabase, supabaseAdmin, boxId, imageType) {\n    const { data: mockups } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    if (!mockups || mockups.length === 0) return 0;\n    for (const img of mockups){\n        await deleteStorageFile(supabaseAdmin, img.image_path);\n    }\n    await supabase.from(\"mockup_images\").delete().eq(\"box_id\", boxId).eq(\"image_type\", imageType);\n    return mockups.length;\n}\n// Helper: Delete all mockups for a box\nasync function deleteAllMockupsForBox(supabase, supabaseAdmin, boxId) {\n    const { data: mockups } = await supabase.from(\"mockup_images\").select(\"*\").eq(\"box_id\", boxId);\n    if (!mockups || mockups.length === 0) return 0;\n    for (const img of mockups){\n        await deleteStorageFile(supabaseAdmin, img.image_path);\n    }\n    await supabase.from(\"mockup_images\").delete().eq(\"box_id\", boxId);\n    return mockups.length;\n}\n// Helper: Delete file from Supabase Storage\nasync function deleteStorageFile(supabaseAdmin, imageUrl) {\n    if (!imageUrl) return;\n    try {\n        // Extract path from URL if it's a full Supabase URL\n        if (imageUrl.includes(\"supabase.co/storage\")) {\n            const match = imageUrl.match(/\\/storage\\/v1\\/object\\/public\\/assets\\/(.+)$/);\n            if (match) {\n                await supabaseAdmin.storage.from(BUCKET_NAME).remove([\n                    match[1]\n                ]);\n            }\n        }\n    } catch (err) {\n        console.warn(\"[MOCKUPS] Could not delete storage file:\", imageUrl, err.message);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVmLElBQUk7UUFDRixvREFBb0Q7UUFDcEQsSUFBSUEsU0FBU3RILFFBQVEsQ0FBQyx3QkFBd0I7WUFDNUMsTUFBTXVILFFBQVFELFNBQVNDLEtBQUssQ0FBQztZQUM3QixJQUFJQSxPQUFPO2dCQUNULE1BQU1oSSxjQUFjbUYsT0FBTyxDQUFDL0UsSUFBSSxDQUFDdkIsYUFBYW9KLE1BQU0sQ0FBQztvQkFBQ0QsS0FBSyxDQUFDLEVBQUU7aUJBQUM7WUFDakU7UUFDRjtJQUNGLEVBQUUsT0FBTzdCLEtBQUs7UUFDWnZGLFFBQVFzSCxJQUFJLENBQUMsNENBQTRDSCxVQUFVNUIsSUFBSXBHLE9BQU87SUFDaEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fzd2VhbGxhcmUtYWRtaW4vLi9hcHAvYXBpL2FkbWluL21vY2t1cHMvcm91dGUuanM/NDZiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGNyZWF0ZVN1cGFiYXNlU2VydmVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL3N1cGFiYXNlLXNlcnZlcidcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0bydcbmltcG9ydCBBZG1aaXAgZnJvbSAnYWRtLXppcCdcblxuY29uc3QgQlVDS0VUX05BTUUgPSAnYXNzZXRzJ1xuXG4vLyBIZWxwZXIgdG8gZ2V0IGF1dGhlbnRpY2F0ZWQgdXNlciBhbmQgY2hlY2sgYWRtaW4gc3RhdHVzXG5hc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkVXNlckFuZENoZWNrQWRtaW4oKSB7XG4gIGlmIChwcm9jZXNzLmVudi5MT0NBTF9NT0RFID09PSAndHJ1ZScpIHtcbiAgICBjb25zdCB7IGNvb2tpZXMgfSA9IGF3YWl0IGltcG9ydCgnbmV4dC9oZWFkZXJzJylcbiAgICBjb25zdCB7IGdldFVzZXJGcm9tVG9rZW4gfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vLi4vbGliL2F1dGgtbG9jYWwnKVxuICAgIFxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpXG4gICAgY29uc3QgdG9rZW4gPSBjb29raWVTdG9yZS5nZXQoJ2F1dGgtdG9rZW4nKT8udmFsdWVcbiAgICBcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyRnJvbVRva2VuKHRva2VuKVxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlciwgaXNBZG1pbjogdHJ1ZSwgZXJyb3I6IG51bGwgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB1c2VyOiBudWxsLCBpc0FkbWluOiBmYWxzZSwgZXJyb3I6ICdOb3QgYXV0aGVudGljYXRlZCcgfVxuICB9XG4gIFxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVN1cGFiYXNlU2VydmVyKClcbiAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gIFxuICBpZiAoZXJyb3IgfHwgIXVzZXIpIHtcbiAgICByZXR1cm4geyB1c2VyOiBudWxsLCBpc0FkbWluOiBmYWxzZSwgZXJyb3I6IGVycm9yPy5tZXNzYWdlIHx8ICdOb3QgYXV0aGVudGljYXRlZCcgfVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXG4gICAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZXG4gICAgKVxuICAgIFxuICAgIGNvbnN0IHsgZGF0YTogY29uZmlnIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYXBwX2NvbmZpZycpXG4gICAgICAuc2VsZWN0KCdhZG1pbl9lbWFpbHMnKVxuICAgICAgLnNpbmdsZSgpXG4gICAgXG4gICAgY29uc3QgYWRtaW5FbWFpbHMgPSBjb25maWc/LmFkbWluX2VtYWlscyB8fCBbXVxuICAgIGNvbnN0IGlzQWRtaW4gPSBhZG1pbkVtYWlscy5pbmNsdWRlcyh1c2VyLmVtYWlsKVxuICAgIFxuICAgIHJldHVybiB7IHVzZXIsIGlzQWRtaW4sIGVycm9yOiBudWxsIH1cbiAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tNT0NLVVBTXSBFcnJvciBjaGVja2luZyBhZG1pbiBzdGF0dXM6JywgZGJFcnJvcilcbiAgICByZXR1cm4geyB1c2VyLCBpc0FkbWluOiBmYWxzZSwgZXJyb3I6IG51bGwgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFN1cGFiYXNlQWRtaW4oKSB7XG4gIHJldHVybiBjcmVhdGVDbGllbnQoXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVlcbiAgKVxufVxuXG4vLyBHRVQgLSBGZXRjaCBtb2NrdXAgaW1hZ2VzIGZvciBhIGJveFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU3VwYWJhc2VTZXJ2ZXIoKVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXIsIGlzQWRtaW4sIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyQW5kQ2hlY2tBZG1pbigpXG4gICAgXG4gICAgaWYgKGF1dGhFcnJvciB8fCAhdXNlciB8fCAhaXNBZG1pbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gICAgY29uc3QgYm94SWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdib3hJZCcpXG4gICAgXG4gICAgaWYgKCFib3hJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdib3hJZCByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IG1vY2t1cHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2JveF9pZCcsIGJveElkKVxuICAgICAgLm9yZGVyKCdkaXNwbGF5X29yZGVyJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG1haW5JbWFnZSA9IG1vY2t1cHM/LmZpbmQobSA9PiBtLmltYWdlX3R5cGUgPT09ICdCT1hfTUFJTicpIHx8IG51bGxcbiAgICBjb25zdCBzZWNvbmRhcnlJbWFnZSA9IG1vY2t1cHM/LmZpbmQobSA9PiBtLmltYWdlX3R5cGUgPT09ICdCT1hfU0VDT05EQVJZJykgfHwgbnVsbFxuICAgIGNvbnN0IGNhcmRNb2NrdXBzID0gKG1vY2t1cHMgfHwgW10pLmZpbHRlcihtID0+IG0uaW1hZ2VfdHlwZSA9PT0gJ0NBUkQnKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBib3hJZCxcbiAgICAgIG1haW5JbWFnZSxcbiAgICAgIHNlY29uZGFyeUltYWdlLFxuICAgICAgY2FyZE1vY2t1cHMsXG4gICAgICB0b3RhbENvdW50OiBtb2NrdXBzPy5sZW5ndGggfHwgMFxuICAgIH0pXG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW01PQ0tVUFMgR0VUXSBFcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuLy8gUE9TVCAtIFVwbG9hZCBtb2NrdXAgaW1hZ2UocylcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTdXBhYmFzZVNlcnZlcigpXG4gIGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBnZXRTdXBhYmFzZUFkbWluKClcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VyLCBpc0FkbWluLCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkVXNlckFuZENoZWNrQWRtaW4oKVxuICAgIFxuICAgIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIgfHwgIWlzQWRtaW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpXG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpXG4gICAgY29uc3QgYm94SWQgPSBmb3JtRGF0YS5nZXQoJ2JveElkJylcbiAgICBjb25zdCBpbWFnZVR5cGUgPSBmb3JtRGF0YS5nZXQoJ2ltYWdlVHlwZScpXG4gICAgXG4gICAgaWYgKCFmaWxlIHx8ICFib3hJZCB8fCAhaW1hZ2VUeXBlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogZmlsZSwgYm94SWQsIGltYWdlVHlwZScgXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHZhbGlkVHlwZXMgPSBbJ0JPWF9NQUlOJywgJ0JPWF9TRUNPTkRBUlknLCAnQ0FSRF9aSVAnXVxuICAgIGlmICghdmFsaWRUeXBlcy5pbmNsdWRlcyhpbWFnZVR5cGUpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6IGBJbnZhbGlkIGltYWdlVHlwZS4gTXVzdCBiZSBvbmUgb2Y6ICR7dmFsaWRUeXBlcy5qb2luKCcsICcpfWAgXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdbTU9DS1VQUyBQT1NUXSBQcm9jZXNzaW5nOicsIHsgYm94SWQsIGltYWdlVHlwZSwgZmlsZU5hbWU6IGZpbGUubmFtZSB9KVxuICAgIFxuICAgIGlmIChpbWFnZVR5cGUgPT09ICdDQVJEX1pJUCcpIHtcbiAgICAgIHJldHVybiBoYW5kbGVDYXJkTW9ja3Vwc1ppcChzdXBhYmFzZSwgc3VwYWJhc2VBZG1pbiwgZmlsZSwgYm94SWQpXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBoYW5kbGVTaW5nbGVJbWFnZVVwbG9hZChzdXBhYmFzZSwgc3VwYWJhc2VBZG1pbiwgZmlsZSwgYm94SWQsIGltYWdlVHlwZSlcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTU9DS1VQUyBQT1NUXSBFcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuLy8gREVMRVRFIC0gRGVsZXRlIG1vY2t1cCBpbWFnZShzKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU3VwYWJhc2VTZXJ2ZXIoKVxuICBjb25zdCBzdXBhYmFzZUFkbWluID0gZ2V0U3VwYWJhc2VBZG1pbigpXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlciwgaXNBZG1pbiwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgZ2V0QXV0aGVudGljYXRlZFVzZXJBbmRDaGVja0FkbWluKClcbiAgICBcbiAgICBpZiAoYXV0aEVycm9yIHx8ICF1c2VyIHx8ICFpc0FkbWluKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBib3hJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2JveElkJylcbiAgICBjb25zdCBpbWFnZUlkID0gc2VhcmNoUGFyYW1zLmdldCgnaW1hZ2VJZCcpXG4gICAgY29uc3QgZGVsZXRlVHlwZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3R5cGUnKVxuICAgIFxuICAgIGlmICghYm94SWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnYm94SWQgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgbGV0IGRlbGV0ZWRDb3VudCA9IDBcbiAgICBcbiAgICBpZiAoaW1hZ2VJZCkge1xuICAgICAgY29uc3QgeyBkYXRhOiBpbWFnZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIGltYWdlSWQpXG4gICAgICAgIC5lcSgnYm94X2lkJywgYm94SWQpXG4gICAgICAgIC5zaW5nbGUoKVxuICAgICAgXG4gICAgICBpZiAoaW1hZ2UpIHtcbiAgICAgICAgYXdhaXQgZGVsZXRlU3RvcmFnZUZpbGUoc3VwYWJhc2VBZG1pbiwgaW1hZ2UuaW1hZ2VfcGF0aClcbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnbW9ja3VwX2ltYWdlcycpLmRlbGV0ZSgpLmVxKCdpZCcsIGltYWdlSWQpXG4gICAgICAgIGRlbGV0ZWRDb3VudCA9IDFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRlbGV0ZVR5cGUgPT09ICdhbGwnKSB7XG4gICAgICBkZWxldGVkQ291bnQgPSBhd2FpdCBkZWxldGVBbGxNb2NrdXBzRm9yQm94KHN1cGFiYXNlLCBzdXBhYmFzZUFkbWluLCBib3hJZClcbiAgICB9IGVsc2UgaWYgKGRlbGV0ZVR5cGUgPT09ICdtYWluJykge1xuICAgICAgZGVsZXRlZENvdW50ID0gYXdhaXQgZGVsZXRlTW9ja3Vwc0J5VHlwZShzdXBhYmFzZSwgc3VwYWJhc2VBZG1pbiwgYm94SWQsICdCT1hfTUFJTicpXG4gICAgfSBlbHNlIGlmIChkZWxldGVUeXBlID09PSAnc2Vjb25kYXJ5Jykge1xuICAgICAgZGVsZXRlZENvdW50ID0gYXdhaXQgZGVsZXRlTW9ja3Vwc0J5VHlwZShzdXBhYmFzZSwgc3VwYWJhc2VBZG1pbiwgYm94SWQsICdCT1hfU0VDT05EQVJZJylcbiAgICB9IGVsc2UgaWYgKGRlbGV0ZVR5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIGRlbGV0ZWRDb3VudCA9IGF3YWl0IGRlbGV0ZU1vY2t1cHNCeVR5cGUoc3VwYWJhc2UsIHN1cGFiYXNlQWRtaW4sIGJveElkLCAnQ0FSRCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBlcnJvcjogJ1NwZWNpZnkgaW1hZ2VJZCBvciB0eXBlIChhbGwsIG1haW4sIHNlY29uZGFyeSwgY2FyZHMpJyBcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGVsZXRlZDogZGVsZXRlZENvdW50IH0pXG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW01PQ0tVUFMgREVMRVRFXSBFcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuLy8gUFVUIC0gVXBkYXRlIG1vY2t1cCBpbWFnZSAoZGlzcGxheV9vcmRlcilcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdCkge1xuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVN1cGFiYXNlU2VydmVyKClcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VyLCBpc0FkbWluLCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkVXNlckFuZENoZWNrQWRtaW4oKVxuICAgIFxuICAgIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIgfHwgIWlzQWRtaW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgaWQsIGRpc3BsYXlPcmRlciB9ID0gYm9keVxuICAgIFxuICAgIGlmICghaWQgfHwgZGlzcGxheU9yZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnaWQgYW5kIGRpc3BsYXlPcmRlciByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgICAgLnVwZGF0ZSh7IGRpc3BsYXlfb3JkZXI6IHBhcnNlSW50KGRpc3BsYXlPcmRlcikgfSlcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KVxuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tNT0NLVVBTIFBVVF0gRXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbi8vIEhlbHBlcjogSGFuZGxlIHNpbmdsZSBpbWFnZSB1cGxvYWQgdG8gU3VwYWJhc2UgU3RvcmFnZVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlU2luZ2xlSW1hZ2VVcGxvYWQoc3VwYWJhc2UsIHN1cGFiYXNlQWRtaW4sIGZpbGUsIGJveElkLCBpbWFnZVR5cGUpIHtcbiAgY29uc3QgdmFsaWRFeHRlbnNpb25zID0gWycucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLndlYnAnXVxuICBjb25zdCBleHQgPSBwYXRoLmV4dG5hbWUoZmlsZS5uYW1lKS50b0xvd2VyQ2FzZSgpXG4gIGlmICghdmFsaWRFeHRlbnNpb25zLmluY2x1ZGVzKGV4dCkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiAnSW52YWxpZCBmaWxlIHR5cGUuIEFsbG93ZWQ6IFBORywgSlBHLCBKUEVHLCBXRUJQJyBcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gIH1cbiAgXG4gIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpXG4gIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKVxuICBjb25zdCBtZDVIYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgnaGV4JylcbiAgY29uc3QgbmV3RmlsZW5hbWUgPSBgJHttZDVIYXNofSR7ZXh0fWBcbiAgXG4gIGNvbnN0IHN0b3JhZ2VQYXRoID0gYGJveGVzLyR7Ym94SWR9L21vY2t1cHMvJHtuZXdGaWxlbmFtZX1gXG4gIFxuICAvLyBEZWxldGUgZXhpc3RpbmcgaW1hZ2Ugb2YgdGhpcyB0eXBlXG4gIGNvbnN0IHsgZGF0YTogZXhpc3RpbmcgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnYm94X2lkJywgYm94SWQpXG4gICAgLmVxKCdpbWFnZV90eXBlJywgaW1hZ2VUeXBlKVxuICBcbiAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGNvbnN0IGltZyBvZiBleGlzdGluZykge1xuICAgICAgYXdhaXQgZGVsZXRlU3RvcmFnZUZpbGUoc3VwYWJhc2VBZG1pbiwgaW1nLmltYWdlX3BhdGgpXG4gICAgfVxuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbW9ja3VwX2ltYWdlcycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcSgnYm94X2lkJywgYm94SWQpXG4gICAgICAuZXEoJ2ltYWdlX3R5cGUnLCBpbWFnZVR5cGUpXG4gIH1cbiAgXG4gIC8vIFVwbG9hZCB0byBTdXBhYmFzZSBTdG9yYWdlXG4gIGNvbnN0IHsgZXJyb3I6IHVwbG9hZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLnN0b3JhZ2VcbiAgICAuZnJvbShCVUNLRVRfTkFNRSlcbiAgICAudXBsb2FkKHN0b3JhZ2VQYXRoLCBidWZmZXIsIHtcbiAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUgfHwgJ2ltYWdlL3BuZycsXG4gICAgICB1cHNlcnQ6IHRydWVcbiAgICB9KVxuICBcbiAgaWYgKHVwbG9hZEVycm9yKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IHVwbG9hZEVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG4gIFxuICBjb25zdCB7IGRhdGE6IHsgcHVibGljVXJsIH0gfSA9IHN1cGFiYXNlQWRtaW4uc3RvcmFnZVxuICAgIC5mcm9tKEJVQ0tFVF9OQU1FKVxuICAgIC5nZXRQdWJsaWNVcmwoc3RvcmFnZVBhdGgpXG4gIFxuICBjb25zdCBuZXdJbWFnZURhdGEgPSB7XG4gICAgaWQ6IG1kNUhhc2gsXG4gICAgYm94X2lkOiBib3hJZCxcbiAgICBpbWFnZV9wYXRoOiBwdWJsaWNVcmwsXG4gICAgaW1hZ2VfdHlwZTogaW1hZ2VUeXBlLFxuICAgIGRpc3BsYXlfb3JkZXI6IGltYWdlVHlwZSA9PT0gJ0JPWF9NQUlOJyA/IDEgOiAyLFxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9XG4gIFxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtb2NrdXBfaW1hZ2VzJylcbiAgICAuaW5zZXJ0KG5ld0ltYWdlRGF0YSlcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ1tNT0NLVVBTXSBDcmVhdGVkJywgaW1hZ2VUeXBlLCAnZm9yIGJveDonLCBib3hJZClcbiAgXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICBpbWFnZTogbmV3SW1hZ2VEYXRhLFxuICAgIG1lc3NhZ2U6IGAke2ltYWdlVHlwZX0gaW1hZ2UgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5YFxuICB9KVxufVxuXG4vLyBIZWxwZXI6IEhhbmRsZSBaSVAgdXBsb2FkIGZvciBjYXJkIG1vY2t1cHNcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhcmRNb2NrdXBzWmlwKHN1cGFiYXNlLCBzdXBhYmFzZUFkbWluLCB6aXBGaWxlLCBib3hJZCkge1xuICBjb25zdCBieXRlcyA9IGF3YWl0IHppcEZpbGUuYXJyYXlCdWZmZXIoKVxuICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShieXRlcylcbiAgXG4gIGNvbnN0IG1heFNpemUgPSA1MCAqIDEwMjQgKiAxMDI0XG4gIGlmIChidWZmZXIubGVuZ3RoID4gbWF4U2l6ZSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdaSVAgZmlsZSB0b28gbGFyZ2UuIE1heGltdW0gc2l6ZSBpcyA1ME1CJyBcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gIH1cbiAgXG4gIGxldCB6aXBcbiAgdHJ5IHtcbiAgICB6aXAgPSBuZXcgQWRtWmlwKGJ1ZmZlcilcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIFpJUCBmaWxlIGZvcm1hdCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICB9XG4gIFxuICBjb25zdCB6aXBFbnRyaWVzID0gemlwLmdldEVudHJpZXMoKVxuICBcbiAgY29uc3QgaW1hZ2VFbnRyaWVzID0gemlwRW50cmllcy5maWx0ZXIoZW50cnkgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSBlbnRyeS5lbnRyeU5hbWUudG9Mb3dlckNhc2UoKVxuICAgIGlmIChlbnRyeS5pc0RpcmVjdG9yeSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKG5hbWUuaW5jbHVkZXMoJ19fbWFjb3N4JykpIHJldHVybiBmYWxzZVxuICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJy4nKSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHBhdGguYmFzZW5hbWUobmFtZSkuc3RhcnRzV2l0aCgnLicpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gL1xcLihwbmd8anBnfGpwZWd8d2VicCkkL2kudGVzdChuYW1lKVxuICB9KVxuICBcbiAgaWYgKGltYWdlRW50cmllcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiAnTm8gdmFsaWQgaW1hZ2VzIGZvdW5kIGluIFpJUCAoUE5HLCBKUEcsIEpQRUcsIFdFQlApJyBcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gIH1cbiAgXG4gIGlmIChpbWFnZUVudHJpZXMubGVuZ3RoID4gMzAwKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogYFRvbyBtYW55IGltYWdlcyAoJHtpbWFnZUVudHJpZXMubGVuZ3RofSkuIE1heGltdW0gaXMgMzAwYCBcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKCdbTU9DS1VQU10gRm91bmQnLCBpbWFnZUVudHJpZXMubGVuZ3RoLCAnaW1hZ2VzIGluIFpJUCBmb3IgYm94OicsIGJveElkKVxuICBcbiAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhcmQgbW9ja3Vwc1xuICBhd2FpdCBkZWxldGVNb2NrdXBzQnlUeXBlKHN1cGFiYXNlLCBzdXBhYmFzZUFkbWluLCBib3hJZCwgJ0NBUkQnKVxuICBcbiAgaW1hZ2VFbnRyaWVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBuYW1lQSA9IHBhdGguYmFzZW5hbWUoYS5lbnRyeU5hbWUpLnRvTG93ZXJDYXNlKClcbiAgICBjb25zdCBuYW1lQiA9IHBhdGguYmFzZW5hbWUoYi5lbnRyeU5hbWUpLnRvTG93ZXJDYXNlKClcbiAgICByZXR1cm4gbmFtZUEubG9jYWxlQ29tcGFyZShuYW1lQiwgdW5kZWZpbmVkLCB7IG51bWVyaWM6IHRydWUsIHNlbnNpdGl2aXR5OiAnYmFzZScgfSlcbiAgfSlcbiAgXG4gIGNvbnN0IGNyZWF0ZWRNb2NrdXBzID0gW11cbiAgY29uc3QgZXJyb3JzID0gW11cbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VFbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZW50cnkgPSBpbWFnZUVudHJpZXNbaV1cbiAgICBjb25zdCBkaXNwbGF5T3JkZXIgPSBpICsgMVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlQnVmZmVyID0gZW50cnkuZ2V0RGF0YSgpXG4gICAgICBjb25zdCBtZDVIYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShmaWxlQnVmZmVyKS5kaWdlc3QoJ2hleCcpXG4gICAgICBjb25zdCBvcmlnaW5hbEV4dCA9IHBhdGguZXh0bmFtZShlbnRyeS5lbnRyeU5hbWUpLnRvTG93ZXJDYXNlKCkgfHwgJy5wbmcnXG4gICAgICBjb25zdCBuZXdGaWxlbmFtZSA9IGAke21kNUhhc2h9JHtvcmlnaW5hbEV4dH1gXG4gICAgICBjb25zdCBzdG9yYWdlUGF0aCA9IGBib3hlcy8ke2JveElkfS9tb2NrdXBzL2NhcmRzLyR7bmV3RmlsZW5hbWV9YFxuICAgICAgXG4gICAgICBjb25zdCB7IGVycm9yOiB1cGxvYWRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5zdG9yYWdlXG4gICAgICAgIC5mcm9tKEJVQ0tFVF9OQU1FKVxuICAgICAgICAudXBsb2FkKHN0b3JhZ2VQYXRoLCBmaWxlQnVmZmVyLCB7XG4gICAgICAgICAgY29udGVudFR5cGU6IG9yaWdpbmFsRXh0ID09PSAnLnBuZycgPyAnaW1hZ2UvcG5nJyA6ICdpbWFnZS9qcGVnJyxcbiAgICAgICAgICB1cHNlcnQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHVwbG9hZEVycm9yKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKHsgZmlsZTogZW50cnkuZW50cnlOYW1lLCBlcnJvcjogdXBsb2FkRXJyb3IubWVzc2FnZSB9KVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB7IGRhdGE6IHsgcHVibGljVXJsIH0gfSA9IHN1cGFiYXNlQWRtaW4uc3RvcmFnZVxuICAgICAgICAuZnJvbShCVUNLRVRfTkFNRSlcbiAgICAgICAgLmdldFB1YmxpY1VybChzdG9yYWdlUGF0aClcbiAgICAgIFxuICAgICAgY29uc3QgeyBlcnJvcjogZGJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICBpZDogYCR7Ym94SWR9X2NhcmRfJHttZDVIYXNofWAsXG4gICAgICAgICAgYm94X2lkOiBib3hJZCxcbiAgICAgICAgICBpbWFnZV9wYXRoOiBwdWJsaWNVcmwsXG4gICAgICAgICAgaW1hZ2VfdHlwZTogJ0NBUkQnLFxuICAgICAgICAgIGRpc3BsYXlfb3JkZXI6IGRpc3BsYXlPcmRlcixcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGRiRXJyb3IpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goeyBmaWxlOiBlbnRyeS5lbnRyeU5hbWUsIGVycm9yOiBkYkVycm9yLm1lc3NhZ2UgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNyZWF0ZWRNb2NrdXBzLnB1c2goe1xuICAgICAgICAgIGlkOiBgJHtib3hJZH1fY2FyZF8ke21kNUhhc2h9YCxcbiAgICAgICAgICBvcmlnaW5hbEZpbGU6IHBhdGguYmFzZW5hbWUoZW50cnkuZW50cnlOYW1lKSxcbiAgICAgICAgICBpbWFnZVBhdGg6IHB1YmxpY1VybCxcbiAgICAgICAgICBkaXNwbGF5T3JkZXI6IGRpc3BsYXlPcmRlclxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZXJyb3JzLnB1c2goeyBmaWxlOiBlbnRyeS5lbnRyeU5hbWUsIGVycm9yOiBlcnIubWVzc2FnZSB9KVxuICAgIH1cbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ1tNT0NLVVBTXSBDcmVhdGVkJywgY3JlYXRlZE1vY2t1cHMubGVuZ3RoLCAnY2FyZCBtb2NrdXBzIGZvciBib3g6JywgYm94SWQpXG4gIFxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgbWVzc2FnZTogYFVwbG9hZGVkICR7Y3JlYXRlZE1vY2t1cHMubGVuZ3RofSBjYXJkIG1vY2t1cCBpbWFnZXNgLFxuICAgIGNyZWF0ZWQ6IGNyZWF0ZWRNb2NrdXBzLmxlbmd0aCxcbiAgICBtb2NrdXBzOiBjcmVhdGVkTW9ja3VwcyxcbiAgICBlcnJvcnM6IGVycm9ycy5sZW5ndGggPiAwID8gZXJyb3JzIDogdW5kZWZpbmVkXG4gIH0pXG59XG5cbi8vIEhlbHBlcjogRGVsZXRlIG1vY2t1cHMgYnkgdHlwZVxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlTW9ja3Vwc0J5VHlwZShzdXBhYmFzZSwgc3VwYWJhc2VBZG1pbiwgYm94SWQsIGltYWdlVHlwZSkge1xuICBjb25zdCB7IGRhdGE6IG1vY2t1cHMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21vY2t1cF9pbWFnZXMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnYm94X2lkJywgYm94SWQpXG4gICAgLmVxKCdpbWFnZV90eXBlJywgaW1hZ2VUeXBlKVxuICBcbiAgaWYgKCFtb2NrdXBzIHx8IG1vY2t1cHMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuICBcbiAgZm9yIChjb25zdCBpbWcgb2YgbW9ja3Vwcykge1xuICAgIGF3YWl0IGRlbGV0ZVN0b3JhZ2VGaWxlKHN1cGFiYXNlQWRtaW4sIGltZy5pbWFnZV9wYXRoKVxuICB9XG4gIFxuICBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtb2NrdXBfaW1hZ2VzJylcbiAgICAuZGVsZXRlKClcbiAgICAuZXEoJ2JveF9pZCcsIGJveElkKVxuICAgIC5lcSgnaW1hZ2VfdHlwZScsIGltYWdlVHlwZSlcbiAgXG4gIHJldHVybiBtb2NrdXBzLmxlbmd0aFxufVxuXG4vLyBIZWxwZXI6IERlbGV0ZSBhbGwgbW9ja3VwcyBmb3IgYSBib3hcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFsbE1vY2t1cHNGb3JCb3goc3VwYWJhc2UsIHN1cGFiYXNlQWRtaW4sIGJveElkKSB7XG4gIGNvbnN0IHsgZGF0YTogbW9ja3VwcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbW9ja3VwX2ltYWdlcycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdib3hfaWQnLCBib3hJZClcbiAgXG4gIGlmICghbW9ja3VwcyB8fCBtb2NrdXBzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcbiAgXG4gIGZvciAoY29uc3QgaW1nIG9mIG1vY2t1cHMpIHtcbiAgICBhd2FpdCBkZWxldGVTdG9yYWdlRmlsZShzdXBhYmFzZUFkbWluLCBpbWcuaW1hZ2VfcGF0aClcbiAgfVxuICBcbiAgYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbW9ja3VwX2ltYWdlcycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmVxKCdib3hfaWQnLCBib3hJZClcbiAgXG4gIHJldHVybiBtb2NrdXBzLmxlbmd0aFxufVxuXG4vLyBIZWxwZXI6IERlbGV0ZSBmaWxlIGZyb20gU3VwYWJhc2UgU3RvcmFnZVxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlU3RvcmFnZUZpbGUoc3VwYWJhc2VBZG1pbiwgaW1hZ2VVcmwpIHtcbiAgaWYgKCFpbWFnZVVybCkgcmV0dXJuXG4gIFxuICB0cnkge1xuICAgIC8vIEV4dHJhY3QgcGF0aCBmcm9tIFVSTCBpZiBpdCdzIGEgZnVsbCBTdXBhYmFzZSBVUkxcbiAgICBpZiAoaW1hZ2VVcmwuaW5jbHVkZXMoJ3N1cGFiYXNlLmNvL3N0b3JhZ2UnKSkge1xuICAgICAgY29uc3QgbWF0Y2ggPSBpbWFnZVVybC5tYXRjaCgvXFwvc3RvcmFnZVxcL3YxXFwvb2JqZWN0XFwvcHVibGljXFwvYXNzZXRzXFwvKC4rKSQvKVxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGF3YWl0IHN1cGFiYXNlQWRtaW4uc3RvcmFnZS5mcm9tKEJVQ0tFVF9OQU1FKS5yZW1vdmUoW21hdGNoWzFdXSlcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybignW01PQ0tVUFNdIENvdWxkIG5vdCBkZWxldGUgc3RvcmFnZSBmaWxlOicsIGltYWdlVXJsLCBlcnIubWVzc2FnZSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZVN1cGFiYXNlU2VydmVyIiwiY3JlYXRlQ2xpZW50IiwicGF0aCIsImNyeXB0byIsIkFkbVppcCIsIkJVQ0tFVF9OQU1FIiwiZ2V0QXV0aGVudGljYXRlZFVzZXJBbmRDaGVja0FkbWluIiwicHJvY2VzcyIsImVudiIsIkxPQ0FMX01PREUiLCJjb29raWVzIiwiZ2V0VXNlckZyb21Ub2tlbiIsImNvb2tpZVN0b3JlIiwidG9rZW4iLCJnZXQiLCJ2YWx1ZSIsInVzZXIiLCJpc0FkbWluIiwiZXJyb3IiLCJzdXBhYmFzZSIsImRhdGEiLCJhdXRoIiwiZ2V0VXNlciIsIm1lc3NhZ2UiLCJzdXBhYmFzZUFkbWluIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImNvbmZpZyIsImZyb20iLCJzZWxlY3QiLCJzaW5nbGUiLCJhZG1pbkVtYWlscyIsImFkbWluX2VtYWlscyIsImluY2x1ZGVzIiwiZW1haWwiLCJkYkVycm9yIiwiY29uc29sZSIsImdldFN1cGFiYXNlQWRtaW4iLCJHRVQiLCJyZXF1ZXN0IiwiYXV0aEVycm9yIiwianNvbiIsInN0YXR1cyIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImJveElkIiwibW9ja3VwcyIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJtYWluSW1hZ2UiLCJmaW5kIiwibSIsImltYWdlX3R5cGUiLCJzZWNvbmRhcnlJbWFnZSIsImNhcmRNb2NrdXBzIiwiZmlsdGVyIiwidG90YWxDb3VudCIsImxlbmd0aCIsIlBPU1QiLCJmb3JtRGF0YSIsImZpbGUiLCJpbWFnZVR5cGUiLCJ2YWxpZFR5cGVzIiwiam9pbiIsImxvZyIsImZpbGVOYW1lIiwibmFtZSIsImhhbmRsZUNhcmRNb2NrdXBzWmlwIiwiaGFuZGxlU2luZ2xlSW1hZ2VVcGxvYWQiLCJERUxFVEUiLCJpbWFnZUlkIiwiZGVsZXRlVHlwZSIsImRlbGV0ZWRDb3VudCIsImltYWdlIiwiZGVsZXRlU3RvcmFnZUZpbGUiLCJpbWFnZV9wYXRoIiwiZGVsZXRlIiwiZGVsZXRlQWxsTW9ja3Vwc0ZvckJveCIsImRlbGV0ZU1vY2t1cHNCeVR5cGUiLCJzdWNjZXNzIiwiZGVsZXRlZCIsIlBVVCIsImJvZHkiLCJpZCIsImRpc3BsYXlPcmRlciIsInVuZGVmaW5lZCIsInVwZGF0ZSIsImRpc3BsYXlfb3JkZXIiLCJwYXJzZUludCIsInZhbGlkRXh0ZW5zaW9ucyIsImV4dCIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSIsImJ5dGVzIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJtZDVIYXNoIiwiY3JlYXRlSGFzaCIsImRpZ2VzdCIsIm5ld0ZpbGVuYW1lIiwic3RvcmFnZVBhdGgiLCJleGlzdGluZyIsImltZyIsInVwbG9hZEVycm9yIiwic3RvcmFnZSIsInVwbG9hZCIsImNvbnRlbnRUeXBlIiwidHlwZSIsInVwc2VydCIsInB1YmxpY1VybCIsImdldFB1YmxpY1VybCIsIm5ld0ltYWdlRGF0YSIsImJveF9pZCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpbnNlcnQiLCJ6aXBGaWxlIiwibWF4U2l6ZSIsInppcCIsImVyciIsInppcEVudHJpZXMiLCJnZXRFbnRyaWVzIiwiaW1hZ2VFbnRyaWVzIiwiZW50cnkiLCJlbnRyeU5hbWUiLCJpc0RpcmVjdG9yeSIsInN0YXJ0c1dpdGgiLCJiYXNlbmFtZSIsInRlc3QiLCJzb3J0IiwiYSIsImIiLCJuYW1lQSIsIm5hbWVCIiwibG9jYWxlQ29tcGFyZSIsIm51bWVyaWMiLCJzZW5zaXRpdml0eSIsImNyZWF0ZWRNb2NrdXBzIiwiZXJyb3JzIiwiaSIsImZpbGVCdWZmZXIiLCJnZXREYXRhIiwib3JpZ2luYWxFeHQiLCJwdXNoIiwib3JpZ2luYWxGaWxlIiwiaW1hZ2VQYXRoIiwiY3JlYXRlZCIsImltYWdlVXJsIiwibWF0Y2giLCJyZW1vdmUiLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/mockups/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/db-local.js":
/*!*************************!*\
  !*** ./lib/db-local.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLocalClient: () => (/* binding */ createLocalClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n// Local PostgreSQL Database Client\n// Used when LOCAL_MODE=true\n\nlet pool = null;\nfunction getPool() {\n    if (!pool) {\n        const connectionString = process.env.DATABASE_URL || \"postgresql://postgres:postgres@localhost:5432/asweallare\";\n        console.log(\"[DB-LOCAL] Creating pool with:\", connectionString.replace(/:[^:@]+@/, \":***@\"));\n        pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n            connectionString\n        });\n        pool.on(\"error\", (err)=>{\n            console.error(\"[DB-LOCAL] Pool error:\", err.message);\n        });\n    }\n    return pool;\n}\nasync function query(text, params) {\n    const pool = getPool();\n    try {\n        const result = await pool.query(text, params);\n        return result;\n    } catch (error) {\n        console.error(\"[DB-LOCAL] Query error:\", error.message);\n        console.error(\"[DB-LOCAL] Query was:\", text);\n        throw error;\n    }\n}\n// Helper to mimic Supabase response format\nfunction createLocalClient() {\n    return {\n        from: (table)=>new QueryBuilder(table),\n        auth: {\n            getUser: async ()=>{\n                // In local mode, return a mock admin user\n                return {\n                    data: {\n                        user: {\n                            id: \"00000000-0000-0000-0000-000000000001\",\n                            email: \"admin@local.dev\"\n                        }\n                    },\n                    error: null\n                };\n            },\n            getSession: async ()=>{\n                return {\n                    data: {\n                        session: {\n                            user: {\n                                id: \"00000000-0000-0000-0000-000000000001\",\n                                email: \"admin@local.dev\"\n                            }\n                        }\n                    },\n                    error: null\n                };\n            },\n            signOut: async ()=>({\n                    error: null\n                }),\n            onAuthStateChange: ()=>({\n                    data: {\n                        subscription: {\n                            unsubscribe: ()=>{}\n                        }\n                    }\n                })\n        }\n    };\n}\nclass QueryBuilder {\n    constructor(table){\n        this.table = table;\n        this._select = \"*\";\n        this._where = [];\n        this._whereParams = [];\n        this._order = null;\n        this._single = false;\n        this._limit = null;\n        this._returnData = true;\n        this._operation = null // 'update', 'delete', or null for select\n        ;\n        this._updateData = null;\n    }\n    select(columns = \"*\") {\n        // Handle Supabase-style nested selects by stripping them\n        // e.g., '*, piles(slug, name)' becomes '*'\n        if (columns.includes(\"(\")) {\n            this._select = columns.split(\",\").filter((c)=>!c.includes(\"(\")).map((c)=>c.trim()).join(\", \") || \"*\";\n        } else {\n            this._select = columns;\n        }\n        return this;\n    }\n    eq(column, value) {\n        this._whereParams.push(value);\n        this._where.push(`\"${column}\" = $${this._whereParams.length}`);\n        return this;\n    }\n    neq(column, value) {\n        this._whereParams.push(value);\n        this._where.push(`\"${column}\" != $${this._whereParams.length}`);\n        return this;\n    }\n    in(column, values) {\n        if (values && values.length > 0) {\n            const placeholders = values.map((_, i)=>`$${this._whereParams.length + i + 1}`).join(\", \");\n            this._whereParams.push(...values);\n            this._where.push(`\"${column}\" IN (${placeholders})`);\n        }\n        // If empty array, don't add any condition (will return all or be filtered by other conditions)\n        return this;\n    }\n    order(column, { ascending = true } = {}) {\n        this._order = `\"${column}\" ${ascending ? \"ASC\" : \"DESC\"}`;\n        return this;\n    }\n    limit(count) {\n        this._limit = count;\n        return this;\n    }\n    single() {\n        this._single = true;\n        this._limit = 1;\n        return this;\n    }\n    // Execute SELECT query\n    async then(resolve, reject) {\n        try {\n            let sql = `SELECT ${this._select} FROM \"${this.table}\"`;\n            if (this._where.length > 0) {\n                sql += ` WHERE ${this._where.join(\" AND \")}`;\n            }\n            if (this._order) {\n                sql += ` ORDER BY ${this._order}`;\n            }\n            if (this._limit) {\n                sql += ` LIMIT ${this._limit}`;\n            }\n            console.log(\"[DB-LOCAL] Executing:\", sql, \"with params:\", this._whereParams);\n            const result = await query(sql, this._whereParams);\n            if (this._single) {\n                resolve({\n                    data: result.rows[0] || null,\n                    error: null\n                });\n            } else {\n                resolve({\n                    data: result.rows,\n                    error: null\n                });\n            }\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Query failed:\", error.message);\n            if (reject) {\n                reject(error);\n            } else {\n                resolve({\n                    data: null,\n                    error\n                });\n            }\n        }\n    }\n    async insert(data) {\n        try {\n            // Handle array of objects\n            const records = Array.isArray(data) ? data : [\n                data\n            ];\n            const results = [];\n            for (const record of records){\n                const keys = Object.keys(record);\n                const values = Object.values(record);\n                const placeholders = values.map((_, i)=>`$${i + 1}`).join(\", \");\n                const quotedKeys = keys.map((k)=>`\"${k}\"`).join(\", \");\n                const sql = `INSERT INTO \"${this.table}\" (${quotedKeys}) VALUES (${placeholders}) RETURNING *`;\n                console.log(\"[DB-LOCAL] Insert:\", sql);\n                const result = await query(sql, values);\n                results.push(result.rows[0]);\n            }\n            // Return a chainable object that mimics Supabase behavior\n            const insertResult = {\n                data: results,\n                error: null\n            };\n            return {\n                ...insertResult,\n                select: ()=>({\n                        single: ()=>Promise.resolve({\n                                data: results[0],\n                                error: null\n                            }),\n                        then: (resolve)=>resolve({\n                                data: results,\n                                error: null\n                            })\n                    }),\n                then: (resolve)=>resolve(insertResult)\n            };\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Insert failed:\", error.message);\n            const errorResult = {\n                data: null,\n                error\n            };\n            return {\n                ...errorResult,\n                select: ()=>({\n                        single: ()=>Promise.resolve(errorResult),\n                        then: (resolve)=>resolve(errorResult)\n                    }),\n                then: (resolve)=>resolve(errorResult)\n            };\n        }\n    }\n    // Store update data for later execution\n    update(data) {\n        this._updateData = data;\n        this._operation = \"update\";\n        return this;\n    }\n    // Execute UPDATE query\n    async _executeUpdate() {\n        try {\n            const keys = Object.keys(this._updateData);\n            const values = Object.values(this._updateData);\n            const setClause = keys.map((k, i)=>`\"${k}\" = $${i + 1}`).join(\", \");\n            let sql = `UPDATE \"${this.table}\" SET ${setClause}`;\n            const params = [\n                ...values\n            ];\n            if (this._where.length > 0) {\n                // Adjust parameter indices for where clause\n                const whereWithOffset = this._where.map((w)=>{\n                    return w.replace(/\\$(\\d+)/g, (match, num)=>`$${parseInt(num) + values.length}`);\n                });\n                sql += ` WHERE ${whereWithOffset.join(\" AND \")}`;\n                params.push(...this._whereParams);\n            }\n            sql += \" RETURNING *\";\n            console.log(\"[DB-LOCAL] Update:\", sql, \"params:\", params);\n            const result = await query(sql, params);\n            return {\n                data: result.rows,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Update failed:\", error.message);\n            return {\n                data: null,\n                error\n            };\n        }\n    }\n    // Execute DELETE query\n    async _executeDelete() {\n        try {\n            let sql = `DELETE FROM \"${this.table}\"`;\n            if (this._where.length > 0) {\n                sql += ` WHERE ${this._where.join(\" AND \")}`;\n            }\n            sql += \" RETURNING *\";\n            console.log(\"[DB-LOCAL] Delete:\", sql);\n            const result = await query(sql, this._whereParams);\n            return {\n                data: result.rows,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Delete failed:\", error.message);\n            return {\n                data: null,\n                error\n            };\n        }\n    }\n    // Mark as delete operation\n    delete() {\n        this._operation = \"delete\";\n        return this;\n    }\n    // Execute SELECT query (and UPDATE/DELETE if flagged)\n    async then(resolve, reject) {\n        try {\n            // Handle update operation\n            if (this._operation === \"update\") {\n                const result = await this._executeUpdate();\n                resolve(result);\n                return;\n            }\n            // Handle delete operation\n            if (this._operation === \"delete\") {\n                const result = await this._executeDelete();\n                resolve(result);\n                return;\n            }\n            // Default: SELECT\n            let sql = `SELECT ${this._select} FROM \"${this.table}\"`;\n            if (this._where.length > 0) {\n                sql += ` WHERE ${this._where.join(\" AND \")}`;\n            }\n            if (this._order) {\n                sql += ` ORDER BY ${this._order}`;\n            }\n            if (this._limit) {\n                sql += ` LIMIT ${this._limit}`;\n            }\n            console.log(\"[DB-LOCAL] Executing:\", sql, \"with params:\", this._whereParams);\n            const result = await query(sql, this._whereParams);\n            if (this._single) {\n                resolve({\n                    data: result.rows[0] || null,\n                    error: null\n                });\n            } else {\n                resolve({\n                    data: result.rows,\n                    error: null\n                });\n            }\n        } catch (error) {\n            console.error(\"[DB-LOCAL] Query failed:\", error.message);\n            if (reject) {\n                reject(error);\n            } else {\n                resolve({\n                    data: null,\n                    error\n                });\n            }\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    query,\n    getPool,\n    createLocalClient\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRTtnQkFDZmtDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDbEMsTUFBTSxDQUFDLENBQUM7WUFDbkM7WUFFQSxJQUFJLElBQUksQ0FBQ0UsTUFBTSxFQUFFO2dCQUNmZ0MsT0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUNoQyxNQUFNLENBQUMsQ0FBQztZQUNoQztZQUVBakMsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QmdFLEtBQUssZ0JBQWdCLElBQUksQ0FBQ25DLFlBQVk7WUFDM0UsTUFBTXBCLFNBQVMsTUFBTUgsTUFBTTBELEtBQUssSUFBSSxDQUFDbkMsWUFBWTtZQUVqRCxJQUFJLElBQUksQ0FBQ0UsT0FBTyxFQUFFO2dCQUNoQitCLFFBQVE7b0JBQUU5QyxNQUFNUCxPQUFPd0QsSUFBSSxDQUFDLEVBQUUsSUFBSTtvQkFBTTdELE9BQU87Z0JBQUs7WUFDdEQsT0FBTztnQkFDTDBELFFBQVE7b0JBQUU5QyxNQUFNUCxPQUFPd0QsSUFBSTtvQkFBRTdELE9BQU87Z0JBQUs7WUFDM0M7UUFDRixFQUFFLE9BQU9BLE9BQU87WUFDZEwsUUFBUUssS0FBSyxDQUFDLDRCQUE0QkEsTUFBTUMsT0FBTztZQUN2RCxJQUFJMEQsUUFBUTtnQkFDVkEsT0FBTzNEO1lBQ1QsT0FBTztnQkFDTDBELFFBQVE7b0JBQUU5QyxNQUFNO29CQUFNWjtnQkFBTTtZQUM5QjtRQUNGO0lBQ0Y7QUFFRjtBQUVBLGlFQUFlO0lBQUVFO0lBQU9aO0lBQVNnQjtBQUFrQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXN3ZWFsbGFyZS1hZG1pbi8uL2xpYi9kYi1sb2NhbC5qcz82MTM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIExvY2FsIFBvc3RncmVTUUwgRGF0YWJhc2UgQ2xpZW50XG4vLyBVc2VkIHdoZW4gTE9DQUxfTU9ERT10cnVlXG5cbmltcG9ydCB7IFBvb2wgfSBmcm9tICdwZydcblxubGV0IHBvb2wgPSBudWxsXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb29sKCkge1xuICBpZiAoIXBvb2wpIHtcbiAgICBjb25zdCBjb25uZWN0aW9uU3RyaW5nID0gcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8ICdwb3N0Z3Jlc3FsOi8vcG9zdGdyZXM6cG9zdGdyZXNAbG9jYWxob3N0OjU0MzIvYXN3ZWFsbGFyZSdcbiAgICBjb25zb2xlLmxvZygnW0RCLUxPQ0FMXSBDcmVhdGluZyBwb29sIHdpdGg6JywgY29ubmVjdGlvblN0cmluZy5yZXBsYWNlKC86W146QF0rQC8sICc6KioqQCcpKVxuICAgIHBvb2wgPSBuZXcgUG9vbCh7IGNvbm5lY3Rpb25TdHJpbmcgfSlcbiAgICBcbiAgICBwb29sLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEQi1MT0NBTF0gUG9vbCBlcnJvcjonLCBlcnIubWVzc2FnZSlcbiAgICB9KVxuICB9XG4gIHJldHVybiBwb29sXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeSh0ZXh0LCBwYXJhbXMpIHtcbiAgY29uc3QgcG9vbCA9IGdldFBvb2woKVxuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkodGV4dCwgcGFyYW1zKVxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREItTE9DQUxdIFF1ZXJ5IGVycm9yOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBRdWVyeSB3YXM6JywgdGV4dClcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIEhlbHBlciB0byBtaW1pYyBTdXBhYmFzZSByZXNwb25zZSBmb3JtYXRcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMb2NhbENsaWVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBmcm9tOiAodGFibGUpID0+IG5ldyBRdWVyeUJ1aWxkZXIodGFibGUpLFxuICAgIGF1dGg6IHtcbiAgICAgIGdldFVzZXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gSW4gbG9jYWwgbW9kZSwgcmV0dXJuIGEgbW9jayBhZG1pbiB1c2VyXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBpZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMScsXG4gICAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AbG9jYWwuZGV2J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGdldFNlc3Npb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBpZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMScsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdhZG1pbkBsb2NhbC5kZXYnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzaWduT3V0OiBhc3luYyAoKSA9PiAoeyBlcnJvcjogbnVsbCB9KSxcbiAgICAgIG9uQXV0aFN0YXRlQ2hhbmdlOiAoKSA9PiAoeyBkYXRhOiB7IHN1YnNjcmlwdGlvbjogeyB1bnN1YnNjcmliZTogKCkgPT4ge30gfSB9IH0pXG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFF1ZXJ5QnVpbGRlciB7XG4gIGNvbnN0cnVjdG9yKHRhYmxlKSB7XG4gICAgdGhpcy50YWJsZSA9IHRhYmxlXG4gICAgdGhpcy5fc2VsZWN0ID0gJyonXG4gICAgdGhpcy5fd2hlcmUgPSBbXVxuICAgIHRoaXMuX3doZXJlUGFyYW1zID0gW11cbiAgICB0aGlzLl9vcmRlciA9IG51bGxcbiAgICB0aGlzLl9zaW5nbGUgPSBmYWxzZVxuICAgIHRoaXMuX2xpbWl0ID0gbnVsbFxuICAgIHRoaXMuX3JldHVybkRhdGEgPSB0cnVlXG4gICAgdGhpcy5fb3BlcmF0aW9uID0gbnVsbCAvLyAndXBkYXRlJywgJ2RlbGV0ZScsIG9yIG51bGwgZm9yIHNlbGVjdFxuICAgIHRoaXMuX3VwZGF0ZURhdGEgPSBudWxsXG4gIH1cblxuICBzZWxlY3QoY29sdW1ucyA9ICcqJykge1xuICAgIC8vIEhhbmRsZSBTdXBhYmFzZS1zdHlsZSBuZXN0ZWQgc2VsZWN0cyBieSBzdHJpcHBpbmcgdGhlbVxuICAgIC8vIGUuZy4sICcqLCBwaWxlcyhzbHVnLCBuYW1lKScgYmVjb21lcyAnKidcbiAgICBpZiAoY29sdW1ucy5pbmNsdWRlcygnKCcpKSB7XG4gICAgICB0aGlzLl9zZWxlY3QgPSBjb2x1bW5zLnNwbGl0KCcsJykuZmlsdGVyKGMgPT4gIWMuaW5jbHVkZXMoJygnKSkubWFwKGMgPT4gYy50cmltKCkpLmpvaW4oJywgJykgfHwgJyonXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NlbGVjdCA9IGNvbHVtbnNcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGVxKGNvbHVtbiwgdmFsdWUpIHtcbiAgICB0aGlzLl93aGVyZVBhcmFtcy5wdXNoKHZhbHVlKVxuICAgIHRoaXMuX3doZXJlLnB1c2goYFwiJHtjb2x1bW59XCIgPSAkJHt0aGlzLl93aGVyZVBhcmFtcy5sZW5ndGh9YClcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgbmVxKGNvbHVtbiwgdmFsdWUpIHtcbiAgICB0aGlzLl93aGVyZVBhcmFtcy5wdXNoKHZhbHVlKVxuICAgIHRoaXMuX3doZXJlLnB1c2goYFwiJHtjb2x1bW59XCIgIT0gJCR7dGhpcy5fd2hlcmVQYXJhbXMubGVuZ3RofWApXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGluKGNvbHVtbiwgdmFsdWVzKSB7XG4gICAgaWYgKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXJzID0gdmFsdWVzLm1hcCgoXywgaSkgPT4gYCQke3RoaXMuX3doZXJlUGFyYW1zLmxlbmd0aCArIGkgKyAxfWApLmpvaW4oJywgJylcbiAgICAgIHRoaXMuX3doZXJlUGFyYW1zLnB1c2goLi4udmFsdWVzKVxuICAgICAgdGhpcy5fd2hlcmUucHVzaChgXCIke2NvbHVtbn1cIiBJTiAoJHtwbGFjZWhvbGRlcnN9KWApXG4gICAgfVxuICAgIC8vIElmIGVtcHR5IGFycmF5LCBkb24ndCBhZGQgYW55IGNvbmRpdGlvbiAod2lsbCByZXR1cm4gYWxsIG9yIGJlIGZpbHRlcmVkIGJ5IG90aGVyIGNvbmRpdGlvbnMpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIG9yZGVyKGNvbHVtbiwgeyBhc2NlbmRpbmcgPSB0cnVlIH0gPSB7fSkge1xuICAgIHRoaXMuX29yZGVyID0gYFwiJHtjb2x1bW59XCIgJHthc2NlbmRpbmcgPyAnQVNDJyA6ICdERVNDJ31gXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGxpbWl0KGNvdW50KSB7XG4gICAgdGhpcy5fbGltaXQgPSBjb3VudFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzaW5nbGUoKSB7XG4gICAgdGhpcy5fc2luZ2xlID0gdHJ1ZVxuICAgIHRoaXMuX2xpbWl0ID0gMVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBFeGVjdXRlIFNFTEVDVCBxdWVyeVxuICBhc3luYyB0aGVuKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgc3FsID0gYFNFTEVDVCAke3RoaXMuX3NlbGVjdH0gRlJPTSBcIiR7dGhpcy50YWJsZX1cImBcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3doZXJlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3FsICs9IGAgV0hFUkUgJHt0aGlzLl93aGVyZS5qb2luKCcgQU5EICcpfWBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX29yZGVyKSB7XG4gICAgICAgIHNxbCArPSBgIE9SREVSIEJZICR7dGhpcy5fb3JkZXJ9YFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodGhpcy5fbGltaXQpIHtcbiAgICAgICAgc3FsICs9IGAgTElNSVQgJHt0aGlzLl9saW1pdH1gXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbREItTE9DQUxdIEV4ZWN1dGluZzonLCBzcWwsICd3aXRoIHBhcmFtczonLCB0aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHNxbCwgdGhpcy5fd2hlcmVQYXJhbXMpXG4gICAgICBcbiAgICAgIGlmICh0aGlzLl9zaW5nbGUpIHtcbiAgICAgICAgcmVzb2x2ZSh7IGRhdGE6IHJlc3VsdC5yb3dzWzBdIHx8IG51bGwsIGVycm9yOiBudWxsIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHsgZGF0YTogcmVzdWx0LnJvd3MsIGVycm9yOiBudWxsIH0pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEQi1MT0NBTF0gUXVlcnkgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICBpZiAocmVqZWN0KSB7XG4gICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoeyBkYXRhOiBudWxsLCBlcnJvciB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluc2VydChkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEhhbmRsZSBhcnJheSBvZiBvYmplY3RzXG4gICAgICBjb25zdCByZWNvcmRzID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV1cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiByZWNvcmRzKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhyZWNvcmQpXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC52YWx1ZXMocmVjb3JkKVxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSB2YWx1ZXMubWFwKChfLCBpKSA9PiBgJCR7aSArIDF9YCkuam9pbignLCAnKVxuICAgICAgICBjb25zdCBxdW90ZWRLZXlzID0ga2V5cy5tYXAoayA9PiBgXCIke2t9XCJgKS5qb2luKCcsICcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzcWwgPSBgSU5TRVJUIElOVE8gXCIke3RoaXMudGFibGV9XCIgKCR7cXVvdGVkS2V5c30pIFZBTFVFUyAoJHtwbGFjZWhvbGRlcnN9KSBSRVRVUk5JTkcgKmBcbiAgICAgICAgY29uc29sZS5sb2coJ1tEQi1MT0NBTF0gSW5zZXJ0OicsIHNxbClcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCB2YWx1ZXMpXG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQucm93c1swXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGEgY2hhaW5hYmxlIG9iamVjdCB0aGF0IG1pbWljcyBTdXBhYmFzZSBiZWhhdmlvclxuICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0ID0geyBkYXRhOiByZXN1bHRzLCBlcnJvcjogbnVsbCB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5pbnNlcnRSZXN1bHQsXG4gICAgICAgIHNlbGVjdDogKCkgPT4gKHtcbiAgICAgICAgICBzaW5nbGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGRhdGE6IHJlc3VsdHNbMF0sIGVycm9yOiBudWxsIH0pLFxuICAgICAgICAgIHRoZW46IChyZXNvbHZlKSA9PiByZXNvbHZlKHsgZGF0YTogcmVzdWx0cywgZXJyb3I6IG51bGwgfSlcbiAgICAgICAgfSksXG4gICAgICAgIHRoZW46IChyZXNvbHZlKSA9PiByZXNvbHZlKGluc2VydFJlc3VsdClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBJbnNlcnQgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICBjb25zdCBlcnJvclJlc3VsdCA9IHsgZGF0YTogbnVsbCwgZXJyb3IgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXJyb3JSZXN1bHQsXG4gICAgICAgIHNlbGVjdDogKCkgPT4gKHtcbiAgICAgICAgICBzaW5nbGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShlcnJvclJlc3VsdCksXG4gICAgICAgICAgdGhlbjogKHJlc29sdmUpID0+IHJlc29sdmUoZXJyb3JSZXN1bHQpXG4gICAgICAgIH0pLFxuICAgICAgICB0aGVuOiAocmVzb2x2ZSkgPT4gcmVzb2x2ZShlcnJvclJlc3VsdClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBTdG9yZSB1cGRhdGUgZGF0YSBmb3IgbGF0ZXIgZXhlY3V0aW9uXG4gIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5fdXBkYXRlRGF0YSA9IGRhdGFcbiAgICB0aGlzLl9vcGVyYXRpb24gPSAndXBkYXRlJ1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBFeGVjdXRlIFVQREFURSBxdWVyeVxuICBhc3luYyBfZXhlY3V0ZVVwZGF0ZSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX3VwZGF0ZURhdGEpXG4gICAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuX3VwZGF0ZURhdGEpXG4gICAgICBjb25zdCBzZXRDbGF1c2UgPSBrZXlzLm1hcCgoaywgaSkgPT4gYFwiJHtrfVwiID0gJCR7aSArIDF9YCkuam9pbignLCAnKVxuICAgICAgXG4gICAgICBsZXQgc3FsID0gYFVQREFURSBcIiR7dGhpcy50YWJsZX1cIiBTRVQgJHtzZXRDbGF1c2V9YFxuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLnZhbHVlc11cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3doZXJlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gQWRqdXN0IHBhcmFtZXRlciBpbmRpY2VzIGZvciB3aGVyZSBjbGF1c2VcbiAgICAgICAgY29uc3Qgd2hlcmVXaXRoT2Zmc2V0ID0gdGhpcy5fd2hlcmUubWFwKHcgPT4ge1xuICAgICAgICAgIHJldHVybiB3LnJlcGxhY2UoL1xcJChcXGQrKS9nLCAobWF0Y2gsIG51bSkgPT4gYCQke3BhcnNlSW50KG51bSkgKyB2YWx1ZXMubGVuZ3RofWApXG4gICAgICAgIH0pXG4gICAgICAgIHNxbCArPSBgIFdIRVJFICR7d2hlcmVXaXRoT2Zmc2V0LmpvaW4oJyBBTkQgJyl9YFxuICAgICAgICBwYXJhbXMucHVzaCguLi50aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3FsICs9ICcgUkVUVVJOSU5HIConXG4gICAgICBjb25zb2xlLmxvZygnW0RCLUxPQ0FMXSBVcGRhdGU6Jywgc3FsLCAncGFyYW1zOicsIHBhcmFtcylcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHNxbCwgcGFyYW1zKVxuICAgICAgXG4gICAgICByZXR1cm4geyBkYXRhOiByZXN1bHQucm93cywgZXJyb3I6IG51bGwgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbREItTE9DQUxdIFVwZGF0ZSBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSlcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgICB9XG4gIH1cblxuICAvLyBFeGVjdXRlIERFTEVURSBxdWVyeVxuICBhc3luYyBfZXhlY3V0ZURlbGV0ZSgpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHNxbCA9IGBERUxFVEUgRlJPTSBcIiR7dGhpcy50YWJsZX1cImBcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3doZXJlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3FsICs9IGAgV0hFUkUgJHt0aGlzLl93aGVyZS5qb2luKCcgQU5EICcpfWBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3FsICs9ICcgUkVUVVJOSU5HIConXG4gICAgICBjb25zb2xlLmxvZygnW0RCLUxPQ0FMXSBEZWxldGU6Jywgc3FsKVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCB0aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgZGF0YTogcmVzdWx0LnJvd3MsIGVycm9yOiBudWxsIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBEZWxldGUgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9XG4gICAgfVxuICB9XG5cbiAgLy8gTWFyayBhcyBkZWxldGUgb3BlcmF0aW9uXG4gIGRlbGV0ZSgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSAnZGVsZXRlJ1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBFeGVjdXRlIFNFTEVDVCBxdWVyeSAoYW5kIFVQREFURS9ERUxFVEUgaWYgZmxhZ2dlZClcbiAgYXN5bmMgdGhlbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB0cnkge1xuICAgICAgLy8gSGFuZGxlIHVwZGF0ZSBvcGVyYXRpb25cbiAgICAgIGlmICh0aGlzLl9vcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2V4ZWN1dGVVcGRhdGUoKVxuICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBkZWxldGUgb3BlcmF0aW9uXG4gICAgICBpZiAodGhpcy5fb3BlcmF0aW9uID09PSAnZGVsZXRlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9leGVjdXRlRGVsZXRlKClcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEZWZhdWx0OiBTRUxFQ1RcbiAgICAgIGxldCBzcWwgPSBgU0VMRUNUICR7dGhpcy5fc2VsZWN0fSBGUk9NIFwiJHt0aGlzLnRhYmxlfVwiYFxuICAgICAgXG4gICAgICBpZiAodGhpcy5fd2hlcmUubGVuZ3RoID4gMCkge1xuICAgICAgICBzcWwgKz0gYCBXSEVSRSAke3RoaXMuX3doZXJlLmpvaW4oJyBBTkQgJyl9YFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodGhpcy5fb3JkZXIpIHtcbiAgICAgICAgc3FsICs9IGAgT1JERVIgQlkgJHt0aGlzLl9vcmRlcn1gXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0aGlzLl9saW1pdCkge1xuICAgICAgICBzcWwgKz0gYCBMSU1JVCAke3RoaXMuX2xpbWl0fWBcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ1tEQi1MT0NBTF0gRXhlY3V0aW5nOicsIHNxbCwgJ3dpdGggcGFyYW1zOicsIHRoaXMuX3doZXJlUGFyYW1zKVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCB0aGlzLl93aGVyZVBhcmFtcylcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuX3NpbmdsZSkge1xuICAgICAgICByZXNvbHZlKHsgZGF0YTogcmVzdWx0LnJvd3NbMF0gfHwgbnVsbCwgZXJyb3I6IG51bGwgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoeyBkYXRhOiByZXN1bHQucm93cywgZXJyb3I6IG51bGwgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RCLUxPQ0FMXSBRdWVyeSBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSlcbiAgICAgIGlmIChyZWplY3QpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSh7IGRhdGE6IG51bGwsIGVycm9yIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBxdWVyeSwgZ2V0UG9vbCwgY3JlYXRlTG9jYWxDbGllbnQgfSJdLCJuYW1lcyI6WyJQb29sIiwicG9vbCIsImdldFBvb2wiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImNvbnNvbGUiLCJsb2ciLCJyZXBsYWNlIiwib24iLCJlcnIiLCJlcnJvciIsIm1lc3NhZ2UiLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJyZXN1bHQiLCJjcmVhdGVMb2NhbENsaWVudCIsImZyb20iLCJ0YWJsZSIsIlF1ZXJ5QnVpbGRlciIsImF1dGgiLCJnZXRVc2VyIiwiZGF0YSIsInVzZXIiLCJpZCIsImVtYWlsIiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iLCJzaWduT3V0Iiwib25BdXRoU3RhdGVDaGFuZ2UiLCJzdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsImNvbnN0cnVjdG9yIiwiX3NlbGVjdCIsIl93aGVyZSIsIl93aGVyZVBhcmFtcyIsIl9vcmRlciIsIl9zaW5nbGUiLCJfbGltaXQiLCJfcmV0dXJuRGF0YSIsIl9vcGVyYXRpb24iLCJfdXBkYXRlRGF0YSIsInNlbGVjdCIsImNvbHVtbnMiLCJpbmNsdWRlcyIsInNwbGl0IiwiZmlsdGVyIiwiYyIsIm1hcCIsInRyaW0iLCJqb2luIiwiZXEiLCJjb2x1bW4iLCJ2YWx1ZSIsInB1c2giLCJsZW5ndGgiLCJuZXEiLCJpbiIsInZhbHVlcyIsInBsYWNlaG9sZGVycyIsIl8iLCJpIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsaW1pdCIsImNvdW50Iiwic2luZ2xlIiwidGhlbiIsInJlc29sdmUiLCJyZWplY3QiLCJzcWwiLCJyb3dzIiwiaW5zZXJ0IiwicmVjb3JkcyIsIkFycmF5IiwiaXNBcnJheSIsInJlc3VsdHMiLCJyZWNvcmQiLCJrZXlzIiwiT2JqZWN0IiwicXVvdGVkS2V5cyIsImsiLCJpbnNlcnRSZXN1bHQiLCJQcm9taXNlIiwiZXJyb3JSZXN1bHQiLCJ1cGRhdGUiLCJfZXhlY3V0ZVVwZGF0ZSIsInNldENsYXVzZSIsIndoZXJlV2l0aE9mZnNldCIsInciLCJtYXRjaCIsIm51bSIsInBhcnNlSW50IiwiX2V4ZWN1dGVEZWxldGUiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db-local.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.js":
/*!********************************!*\
  !*** ./lib/supabase-server.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseServer: () => (/* binding */ createSupabaseServer)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _db_local__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db-local */ \"(rsc)/./lib/db-local.js\");\n\n\n\nfunction createSupabaseServer() {\n    // Check if running in local mode\n    if (process.env.LOCAL_MODE === \"true\") {\n        return (0,_db_local__WEBPACK_IMPORTED_MODULE_2__.createLocalClient)();\n    }\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://pwdwemakaozxmutwswqa.supabase.co\", \"sb_publishable_K-L2v83yXtTeHkSWtFX_ag_ZbjbDq8p\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n                } catch  {\n                // Server component, ignore\n                }\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0Q7QUFDWjtBQUNRO0FBRXZDLFNBQVNHO0lBQ2QsaUNBQWlDO0lBQ2pDLElBQUlDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxLQUFLLFFBQVE7UUFDckMsT0FBT0osNERBQWlCQTtJQUMxQjtJQUVBLE1BQU1LLGNBQWNOLHFEQUFPQTtJQUUzQixPQUFPRCxpRUFBa0JBLENBQ3ZCSSwwQ0FBb0MsRUFDcENBLGdEQUF5QyxFQUN6QztRQUNFSCxTQUFTO1lBQ1BTO2dCQUNFLE9BQU9ILFlBQVlHLE1BQU07WUFDM0I7WUFDQUMsUUFBT0MsWUFBWTtnQkFDakIsSUFBSTtvQkFDRkEsYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUM1Q1QsWUFBWVUsR0FBRyxDQUFDSCxNQUFNQyxPQUFPQztnQkFFakMsRUFBRSxPQUFNO2dCQUNOLDJCQUEyQjtnQkFDN0I7WUFDRjtRQUNGO0lBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fzd2VhbGxhcmUtYWRtaW4vLi9saWIvc3VwYWJhc2Utc2VydmVyLmpzP2RiYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3NzcidcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnXG5pbXBvcnQgeyBjcmVhdGVMb2NhbENsaWVudCB9IGZyb20gJy4vZGItbG9jYWwnXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdXBhYmFzZVNlcnZlcigpIHtcbiAgLy8gQ2hlY2sgaWYgcnVubmluZyBpbiBsb2NhbCBtb2RlXG4gIGlmIChwcm9jZXNzLmVudi5MT0NBTF9NT0RFID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gY3JlYXRlTG9jYWxDbGllbnQoKVxuICB9XG5cbiAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKClcbiAgXG4gIHJldHVybiBjcmVhdGVTZXJ2ZXJDbGllbnQoXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0QWxsKCkge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXRBbGwoKVxuICAgICAgICB9LFxuICAgICAgICBzZXRBbGwoY29va2llc1RvU2V0KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+XG4gICAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIFNlcnZlciBjb21wb25lbnQsIGlnbm9yZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfVxuICApXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ2xpZW50IiwiY29va2llcyIsImNyZWF0ZUxvY2FsQ2xpZW50IiwiY3JlYXRlU3VwYWJhc2VTZXJ2ZXIiLCJwcm9jZXNzIiwiZW52IiwiTE9DQUxfTU9ERSIsImNvb2tpZVN0b3JlIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/cookie","vendor-chunks/adm-zip"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fmockups%2Froute&page=%2Fapi%2Fadmin%2Fmockups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmockups%2Froute.js&appDir=%2Fapp%2Fapps%2Fadmin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fapps%2Fadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();